{"version":3,"file":"index.cjs.js","sources":["../src/random.ts","../src/errors.ts","../src/bytes.ts","../src/keccak256.ts","../src/rlp.ts","../src/keyTool.ts","../../../node_modules/tslib/tslib.es6.js","../src/keystore.ts","../src/bech32.ts","../src/types.ts","../src/address.ts","../src/index.ts"],"sourcesContent":["/**\n * @packageDocumentation\n * @module harmony-crypto\n */\n\n/**\n * Uses JS-native CSPRNG to generate a specified number of bytes.\n * @NOTE\n * this method throws if no PRNG is available.\n * @param {Number} bytes bytes number to generate\n * @return {String} ramdom hex string\n */\nexport const randomBytes = (bytes: number): string => {\n  let randBz: number[] | Uint8Array;\n\n  if (typeof window !== 'undefined' && window.crypto && window.crypto.getRandomValues) {\n    randBz = window.crypto.getRandomValues(new Uint8Array(bytes));\n  } else if (typeof require !== 'undefined') {\n    randBz = require('crypto').randomBytes(bytes);\n  } else {\n    throw new Error('Unable to generate safe random numbers.');\n  }\n\n  let randStr = '';\n  for (let i = 0; i < bytes; i += 1) {\n    randStr += `00${randBz[i].toString(16)}`.slice(-2);\n  }\n\n  return randStr;\n};\n","/**\n * ## About this package\n *\n * `@harmony-js/crypot` provides a series of functions to deal with keys\n *\n * ## How to use this package\n *\n * ### Create a Harmony Instance\n * ```javascript\n * const { Harmony } = require('@harmony-js/core');\n * const { ChainID, ChainType } = require('@harmony-js/utils');\n *\n * const hmy = new Harmony(\n *   'http://localhost:9500',\n *   {\n *     chainType: ChainType.Harmony,\n *     chainId: ChainID.HmyLocal,\n *   },\n * );\n * ```\n *\n * ### Some examples\n *\n * ```javascript\n * // randomBytes\n * const bytes = hmy.crypto.randomBytes(20);\n * console.log(bytes)\n *\n * // encryptPhrase\n * const myPhrase = hmy.wallet.newMnemonic();\n * const pwd = '1234';\n * hmy.crypto.encryptPhrase(myPhrase, pwd).then((value) => {\n *   console.log(value);\n * })\n *\n * // decryptThePhrase\n * hmy.crypto.encryptPhrase(myPhrase, pwd).then((keystore) => {\n *   hmy.crypto.decryptPhrase(JSON.parse(keystore), pwd).then((value) => {\n *     console.log(value);\n *   })\n * })\n *\n * // generatePrivateKey\n * const privateKey = hmy.crypto.generatePrivateKey();\n * console.log(privateKey)\n *\n * // getPubkeyFromPrivateKey\n * const publicKey = hmy.crypto.getPubkeyFromPrivateKey(privateKey);\n * console.log(publicKey);\n *\n * // getAddressFromPrivateKey\n * const address = hmy.crypto.getAddressFromPrivateKey(privateKey);\n * console.log(address);\n *\n * // getAddressFromPublicKey\n * const address = hmy.crypto.getAddressFromPublicKey(publicKey);\n * console.log(address);\n *\n * // toChecksumAddress\n * const checksumAddr = hmy.crypto.toChecksumAddress(address);\n * console.log(checksumAddr);\n * ```\n *\n * @packageDocumentation\n * @module harmony-crypto\n */\n\n// This file is ported from ether.js/src.ts/errors.ts\n\n// Unknown Error\n/** @hidden */\nexport const UNKNOWN_ERROR = 'UNKNOWN_ERROR';\n\n// Not implemented\n/** @hidden */\nexport const NOT_IMPLEMENTED = 'NOT_IMPLEMENTED';\n\n// Missing new operator to an object\n//  - name: The name of the class\n/** @hidden */\nexport const MISSING_NEW = 'MISSING_NEW';\n\n// Call exception\n//  - transaction: the transaction\n//  - address?: the contract address\n//  - args?: The arguments passed into the function\n//  - method?: The Solidity method signature\n//  - errorSignature?: The EIP848 error signature\n//  - errorArgs?: The EIP848 error parameters\n//  - reason: The reason (only for EIP848 \"Error(string)\")\n/** @hidden */\nexport const CALL_EXCEPTION = 'CALL_EXCEPTION';\n\n// Invalid argument (e.g. value is incompatible with type) to a function:\n//   - argument: The argument name that was invalid\n//   - value: The value of the argument\n/** @hidden */\nexport const INVALID_ARGUMENT = 'INVALID_ARGUMENT';\n\n// Missing argument to a function:\n//   - count: The number of arguments received\n//   - expectedCount: The number of arguments expected\n/** @hidden */\nexport const MISSING_ARGUMENT = 'MISSING_ARGUMENT';\n\n// Too many arguments\n//   - count: The number of arguments received\n//   - expectedCount: The number of arguments expected\n/** @hidden */\nexport const UNEXPECTED_ARGUMENT = 'UNEXPECTED_ARGUMENT';\n\n// Numeric Fault\n//   - operation: the operation being executed\n//   - fault: the reason this faulted\n/** @hidden */\nexport const NUMERIC_FAULT = 'NUMERIC_FAULT';\n\n// Insufficien funds (< value + gasLimit * gasPrice)\n//   - transaction: the transaction attempted\n/** @hidden */\nexport const INSUFFICIENT_FUNDS = 'INSUFFICIENT_FUNDS';\n\n// Nonce has already been used\n//   - transaction: the transaction attempted\n/** @hidden */\nexport const NONCE_EXPIRED = 'NONCE_EXPIRED';\n\n// The replacement fee for the transaction is too low\n//   - transaction: the transaction attempted\n/** @hidden */\nexport const REPLACEMENT_UNDERPRICED = 'REPLACEMENT_UNDERPRICED';\n\n// Unsupported operation\n//   - operation\n/** @hidden */\nexport const UNSUPPORTED_OPERATION = 'UNSUPPORTED_OPERATION';\n\n// tslint:disable-next-line: variable-name\n/** @hidden */\nlet _permanentCensorErrors = false;\n// tslint:disable-next-line: variable-name\n/** @hidden */\nlet _censorErrors = false;\n\n// @TODO: Enum\n/** @hidden */\nexport function throwError(message: string, code: string | null | undefined, params: any): never {\n  if (_censorErrors) {\n    throw new Error('unknown error');\n  }\n\n  if (!code) {\n    code = UNKNOWN_ERROR;\n  }\n  if (!params) {\n    params = {};\n  }\n\n  const messageDetails: string[] = [];\n  Object.keys(params).forEach((key) => {\n    try {\n      messageDetails.push(key + '=' + JSON.stringify(params[key]));\n    } catch (error) {\n      messageDetails.push(key + '=' + JSON.stringify(params[key].toString()));\n    }\n  });\n  messageDetails.push('version=' + '#version');\n\n  const reason = message;\n  if (messageDetails.length) {\n    message += ' (' + messageDetails.join(', ') + ')';\n  }\n\n  // @TODO: Any??\n  const error: any = new Error(message);\n  error.reason = reason;\n  error.code = code;\n\n  Object.keys(params).forEach((key) => {\n    error[key] = params[key];\n  });\n\n  throw error;\n}\n\n/** @hidden */\nexport function checkNew(self: any, kind: any): void {\n  if (!(self instanceof kind)) {\n    throwError('missing new', MISSING_NEW, { name: kind.name });\n  }\n}\n\n/** @hidden */\nexport function checkArgumentCount(count: number, expectedCount: number, suffix?: string): void {\n  if (!suffix) {\n    suffix = '';\n  }\n  if (count < expectedCount) {\n    throwError('missing argument' + suffix, MISSING_ARGUMENT, {\n      count,\n      expectedCount,\n    });\n  }\n  if (count > expectedCount) {\n    throwError('too many arguments' + suffix, UNEXPECTED_ARGUMENT, {\n      count,\n      expectedCount,\n    });\n  }\n}\n\n/** @hidden */\nexport function setCensorship(censorship: boolean, permanent?: boolean): void {\n  if (_permanentCensorErrors) {\n    throwError('error censorship permanent', UNSUPPORTED_OPERATION, {\n      operation: 'setCensorship',\n    });\n  }\n\n  _censorErrors = !!censorship;\n  _permanentCensorErrors = !!permanent;\n}\n\n/** @hidden */\nexport function checkNormalize(): void {\n  try {\n    // Make sure all forms of normalization are supported\n    ['NFD', 'NFC', 'NFKD', 'NFKC'].forEach((form) => {\n      try {\n        'test'.normalize(form);\n      } catch (error) {\n        throw new Error('missing ' + form);\n      }\n    });\n\n    if (String.fromCharCode(0xe9).normalize('NFD') !== String.fromCharCode(0x65, 0x0301)) {\n      throw new Error('broken implementation');\n    }\n  } catch (error) {\n    throwError('platform missing String.prototype.normalize', UNSUPPORTED_OPERATION, {\n      operation: 'String.prototype.normalize',\n      form: error.message,\n    });\n  }\n}\n\n/** @hidden */\nconst LogLevels: { [name: string]: number } = {\n  debug: 1,\n  default: 2,\n  info: 2,\n  warn: 3,\n  error: 4,\n  off: 5,\n};\n/** @hidden */\nlet LogLevel = LogLevels.default;\n\n/** @hidden */\nexport function setLogLevel(logLevel: string): void {\n  const level = LogLevels[logLevel];\n  if (level == null) {\n    warn('invliad log level - ' + logLevel);\n    return;\n  }\n  LogLevel = level;\n}\n\n/** @hidden */\nfunction log(logLevel: string, args: [any?, ...any[]]): void {\n  if (LogLevel > LogLevels[logLevel]) {\n    return;\n  }\n  console.log.apply(console, args);\n}\n\n/** @hidden */\nexport function warn(...args: [any?, ...any[]]): void {\n  log('warn', args);\n}\n\n/** @hidden */\nexport function info(...args: [any?, ...any[]]): void {\n  log('info', args);\n}\n","/**\n * @packageDocumentation\n * @module harmony-crypto\n * @hidden\n */\n\n// This file is ported from ether.js/src.ts/utils/bytes.ts\n// and done some fixes\n\nimport * as errors from './errors';\n\nexport type Arrayish = string | ArrayLike<number>;\n\nexport interface Hexable {\n  toHexString(): string;\n}\n\nexport interface Signature {\n  r: string;\n  s: string;\n\n  /* At least one of the following MUST be specified; the other will be derived */\n  recoveryParam?: number;\n  v?: number;\n}\n\n///////////////////////////////\n\nexport function isHexable(value: any): value is Hexable {\n  return !!value.toHexString;\n}\n\nfunction addSlice(array: Uint8Array): Uint8Array {\n  if (typeof array === 'object' && typeof array.slice === 'function') {\n    return array;\n  }\n\n  // tslint:disable-next-line: only-arrow-functions\n  array.slice = function() {\n    const args = Array.prototype.slice.call(arguments);\n    return addSlice(new Uint8Array(Array.prototype.slice.apply(array, [args[0], args[1]])));\n  };\n\n  return array;\n}\n\nexport function isArrayish(value: any): value is Arrayish {\n  if (\n    !value ||\n    // tslint:disable-next-line: radix\n    parseInt(String(value.length)) !== value.length ||\n    typeof value === 'string'\n  ) {\n    return false;\n  }\n\n  // tslint:disable-next-line: prefer-for-of\n  for (let i = 0; i < value.length; i++) {\n    const v = value[i];\n    // tslint:disable-next-line: radix\n    if (v < 0 || v >= 256 || parseInt(String(v)) !== v) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function arrayify(value: Arrayish | Hexable): Uint8Array | null {\n  if (value == null) {\n    errors.throwError('cannot convert null value to array', errors.INVALID_ARGUMENT, {\n      arg: 'value',\n      value,\n    });\n  }\n\n  if (isHexable(value)) {\n    value = value.toHexString();\n  }\n\n  if (typeof value === 'string') {\n    const match = value.match(/^(0x)?[0-9a-fA-F]*$/);\n\n    if (!match) {\n      errors.throwError('invalid hexidecimal string', errors.INVALID_ARGUMENT, {\n        arg: 'value',\n        value,\n      });\n    }\n\n    if (match !== null && match[1] !== '0x') {\n      errors.throwError('hex string must have 0x prefix', errors.INVALID_ARGUMENT, {\n        arg: 'value',\n        value,\n      });\n    }\n\n    value = value.substring(2);\n    if (value.length % 2) {\n      value = '0' + value;\n    }\n\n    const result = [];\n    for (let i = 0; i < value.length; i += 2) {\n      result.push(parseInt(value.substr(i, 2), 16));\n    }\n\n    return addSlice(new Uint8Array(result));\n  }\n\n  if (isArrayish(value)) {\n    return addSlice(new Uint8Array(value));\n  }\n\n  errors.throwError('invalid arrayify value', null, {\n    arg: 'value',\n    value,\n    type: typeof value,\n  });\n  return null;\n}\n\nexport function concat(objects: Arrayish[]): Uint8Array {\n  if (objects === null) {\n    throw new Error(`concat objects is null`);\n  }\n  const arrays = [];\n  let length = 0;\n  // tslint:disable-next-line: prefer-for-of\n  for (let i = 0; i < objects.length; i++) {\n    const object = arrayify(objects[i]);\n    if (object == null) {\n      throw new Error('arrayify failed');\n    }\n    arrays.push(object);\n    length += object.length;\n  }\n\n  const result = new Uint8Array(length);\n  let offset = 0;\n  // tslint:disable-next-line: prefer-for-of\n  for (let i = 0; i < arrays.length; i++) {\n    result.set(arrays[i], offset);\n    offset += arrays[i].length;\n  }\n\n  return addSlice(result);\n}\n\nexport function stripZeros(value: Arrayish): Uint8Array {\n  let result: Uint8Array | null = arrayify(value);\n\n  if (result === null) {\n    throw new Error('arrayify failed');\n  }\n\n  if (result.length === 0) {\n    return result;\n  }\n\n  // Find the first non-zero entry\n  let start = 0;\n  while (result[start] === 0) {\n    start++;\n  }\n\n  // If we started with zeros, strip them\n  if (start) {\n    result = result.slice(start);\n  }\n\n  return result;\n}\n\nexport function padZeros(value: Arrayish, length: number): Uint8Array {\n  const arrayifyValue = arrayify(value);\n  if (arrayifyValue === null) {\n    throw new Error('arrayify failed');\n  }\n  if (length < arrayifyValue.length) {\n    throw new Error('cannot pad');\n  }\n\n  const result = new Uint8Array(length);\n  result.set(arrayifyValue, length - arrayifyValue.length);\n  return addSlice(result);\n}\n\nexport function isHexString(value: any, length?: number): boolean {\n  if (typeof value !== 'string' || !value.match(/^0x[0-9A-Fa-f]*$/)) {\n    return false;\n  }\n  if (length && value.length !== 2 + 2 * length) {\n    return false;\n  }\n  return true;\n}\n\nconst HexCharacters: string = '0123456789abcdef';\n\nexport function hexlify(value: Arrayish | Hexable | number): string {\n  if (isHexable(value)) {\n    return value.toHexString();\n  }\n\n  if (typeof value === 'number') {\n    if (value < 0) {\n      errors.throwError('cannot hexlify negative value', errors.INVALID_ARGUMENT, {\n        arg: 'value',\n        value,\n      });\n    }\n\n    // @TODO: Roll this into the above error as a numeric fault (overflow); next version, not backward compatible\n    // We can about (value == MAX_INT) to as well, since that may indicate we underflowed already\n    if (value >= 9007199254740991) {\n      errors.throwError('out-of-range', errors.NUMERIC_FAULT, {\n        operartion: 'hexlify',\n        fault: 'out-of-safe-range',\n      });\n    }\n\n    let hex = '';\n    while (value) {\n      hex = HexCharacters[value & 0x0f] + hex;\n      value = Math.floor(value / 16);\n    }\n\n    if (hex.length) {\n      if (hex.length % 2) {\n        hex = '0' + hex;\n      }\n      return '0x' + hex;\n    }\n\n    return '0x00';\n  }\n\n  if (typeof value === 'string') {\n    const match = value.match(/^(0x)?[0-9a-fA-F]*$/);\n\n    if (!match) {\n      errors.throwError('invalid hexidecimal string', errors.INVALID_ARGUMENT, {\n        arg: 'value',\n        value,\n      });\n    }\n\n    if (match !== null && match[1] !== '0x') {\n      errors.throwError('hex string must have 0x prefix', errors.INVALID_ARGUMENT, {\n        arg: 'value',\n        value,\n      });\n    }\n\n    if (value.length % 2) {\n      value = '0x0' + value.substring(2);\n    }\n    return value;\n  }\n\n  if (isArrayish(value)) {\n    const result = [];\n    // tslint:disable-next-line: prefer-for-of\n    for (let i = 0; i < value.length; i++) {\n      const v = value[i];\n      result.push(HexCharacters[(v & 0xf0) >> 4] + HexCharacters[v & 0x0f]);\n    }\n    return '0x' + result.join('');\n  }\n\n  errors.throwError('invalid hexlify value', null, {\n    arg: 'value',\n    value,\n  });\n  return 'never';\n}\n\nexport function hexDataLength(data: string) {\n  if (!isHexString(data) || data.length % 2 !== 0) {\n    return null;\n  }\n  return (data.length - 2) / 2;\n}\n\nexport function hexDataSlice(data: string, offset: number, endOffset?: number): string {\n  if (!isHexString(data)) {\n    errors.throwError('invalid hex data', errors.INVALID_ARGUMENT, {\n      arg: 'value',\n      value: data,\n    });\n  }\n  if (data.length % 2 !== 0) {\n    errors.throwError('hex data length must be even', errors.INVALID_ARGUMENT, {\n      arg: 'value',\n      value: data,\n    });\n  }\n  offset = 2 + 2 * offset;\n\n  if (endOffset != null) {\n    return '0x' + data.substring(offset, 2 + 2 * endOffset);\n  }\n\n  return '0x' + data.substring(offset);\n}\n\nexport function hexStripZeros(value: string): string {\n  if (!isHexString(value)) {\n    errors.throwError('invalid hex string', errors.INVALID_ARGUMENT, {\n      arg: 'value',\n      value,\n    });\n  }\n  while (value.length > 3 && value.substring(0, 3) === '0x0') {\n    value = '0x' + value.substring(3);\n  }\n  return value;\n}\n\nexport function hexZeroPad(value: string, length: number): string {\n  if (!isHexString(value)) {\n    errors.throwError('invalid hex string', errors.INVALID_ARGUMENT, {\n      arg: 'value',\n      value,\n    });\n  }\n\n  while (value.length < 2 * length + 2) {\n    value = '0x0' + value.substring(2);\n  }\n  return value;\n}\n\nexport function bytesPadLeft(value: string, byteLength: number): string {\n  if (!isHexString(value)) {\n    errors.throwError('invalid hex string', errors.INVALID_ARGUMENT, {\n      arg: 'value',\n      value,\n    });\n  }\n\n  const striped = value.substring(2);\n  if (striped.length > byteLength * 2) {\n    throw new Error(`hex string length = ${striped.length} beyond byteLength=${byteLength}`);\n  }\n  const padLength = byteLength * 2 - striped.length;\n  const returnValue = '0x' + '0'.repeat(padLength) + striped;\n  return returnValue;\n}\nexport function bytesPadRight(value: string, byteLength: number): string {\n  if (!isHexString(value)) {\n    errors.throwError('invalid hex string', errors.INVALID_ARGUMENT, {\n      arg: 'value',\n      value,\n    });\n  }\n\n  const striped = value.substring(2);\n  if (striped.length > byteLength * 2) {\n    throw new Error(`hex string length = ${striped.length} beyond byteLength=${byteLength}`);\n  }\n  const padLength = byteLength * 2 - striped.length;\n  const returnValue = '0x' + striped + '0'.repeat(padLength);\n  return returnValue;\n}\n\nexport function isSignature(value: any): value is Signature {\n  return value && value.r != null && value.s != null;\n}\n\nexport function splitSignature(signature: Arrayish | Signature): Signature {\n  if (signature !== undefined) {\n    let v = 0;\n    let r = '0x';\n    let s = '0x';\n\n    if (isSignature(signature)) {\n      if (signature.v == null && signature.recoveryParam == null) {\n        errors.throwError(\n          'at least on of recoveryParam or v must be specified',\n          errors.INVALID_ARGUMENT,\n          { argument: 'signature', value: signature },\n        );\n      }\n      r = hexZeroPad(signature.r, 32);\n      s = hexZeroPad(signature.s, 32);\n\n      v = signature.v || 0;\n      if (typeof v === 'string') {\n        v = parseInt(v, 16);\n      }\n\n      let recoveryParam = signature.recoveryParam || 0;\n      if (recoveryParam == null && signature.v != null) {\n        recoveryParam = 1 - (v % 2);\n      }\n      v = 27 + recoveryParam;\n    } else {\n      const bytes: Uint8Array = arrayify(signature) || new Uint8Array();\n      if (bytes.length !== 65) {\n        throw new Error('invalid signature');\n      }\n      r = hexlify(bytes.slice(0, 32));\n      s = hexlify(bytes.slice(32, 64));\n\n      v = bytes[64];\n      if (v !== 27 && v !== 28) {\n        v = 27 + (v % 2);\n      }\n    }\n\n    return {\n      r,\n      s,\n      recoveryParam: v - 27,\n      v,\n    };\n  } else {\n    throw new Error('signature is not found');\n  }\n}\n\nexport function joinSignature(signature: Signature): string {\n  signature = splitSignature(signature);\n\n  return hexlify(concat([signature.r, signature.s, signature.recoveryParam ? '0x1c' : '0x1b']));\n}\n\n/**\n * hexToByteArray\n *\n * Convers a hex string to a Uint8Array\n *\n * @param {string} hex\n * @returns {Uint8Array}\n */\nexport const hexToByteArray = (hex: string): Uint8Array => {\n  const res = new Uint8Array(hex.length / 2);\n\n  for (let i = 0; i < hex.length; i += 2) {\n    res[i / 2] = parseInt(hex.substring(i, i + 2), 16);\n  }\n\n  return res;\n};\n\n/**\n * hexToIntArray\n *\n * @param {string} hex\n * @returns {number[]}\n */\nexport const hexToIntArray = (hex: string): number[] => {\n  if (!hex || !isHex(hex)) {\n    return [];\n  }\n\n  const res = [];\n\n  for (let i = 0; i < hex.length; i++) {\n    const c = hex.charCodeAt(i);\n    const hi = c >> 8;\n    const lo = c & 0xff;\n\n    hi ? res.push(hi, lo) : res.push(lo);\n  }\n\n  return res;\n};\n\n/**\n * isHex\n *\n * @param {string} str - string to be tested\n * @returns {boolean}\n */\nexport const isHex = (str: string): boolean => {\n  const plain = str.replace('0x', '');\n  return /[0-9a-f]*$/i.test(plain);\n};\n","/**\n * @packageDocumentation\n * @module harmony-crypto\n * @ignore\n */\n\n// this file is ported from 'ether.js' and done some fixes\nimport * as sha3 from 'js-sha3';\n\nimport { arrayify, Arrayish } from './bytes';\n\nexport function keccak256(data: Arrayish): string {\n  const arrayified = arrayify(data);\n  if (arrayified) {\n    return '0x' + sha3.keccak_256(arrayified);\n  }\n  throw new Error('arrayify failed');\n}\n\n// export function sha3_256(data: Arrayish): string {\n//   const arrayified = arrayify(data);\n//   if (arrayified) {\n//     return '0x' + sha3.sha3_256(arrayified);\n//   }\n//   throw new Error('arrayify failed');\n// }\n","/**\n * @packageDocumentation\n * @module harmony-crypto\n * @hidden\n */\n\n// this file is ported from https://github.com/ethers-io/ethers.js/blob/master/src.ts/utils/rlp.ts\n// and done some fixes\nimport { arrayify, hexlify, Arrayish } from './bytes';\n\nfunction arrayifyInteger(value: number): number[] {\n  const result = [];\n  while (value) {\n    result.unshift(value & 0xff);\n    value >>= 8;\n  }\n  return result;\n}\n\nfunction unarrayifyInteger(data: Uint8Array, offset: number, length: number): number {\n  let result = 0;\n  for (let i = 0; i < length; i++) {\n    result = result * 256 + data[offset + i];\n  }\n  return result;\n}\n\nfunction _encode(object: any[] | string): number[] {\n  if (Array.isArray(object)) {\n    let payload: number[] = [];\n    object.forEach((child) => {\n      payload = payload.concat(_encode(child));\n    });\n\n    if (payload.length <= 55) {\n      payload.unshift(0xc0 + payload.length);\n      return payload;\n    }\n\n    // tslint:disable-next-line: no-shadowed-variable\n    const length = arrayifyInteger(payload.length);\n    length.unshift(0xf7 + length.length);\n\n    return length.concat(payload);\n  }\n\n  const data: number[] = Array.prototype.slice.call(arrayify(object));\n\n  if (data.length === 1 && data[0] <= 0x7f) {\n    return data;\n  } else if (data.length <= 55) {\n    data.unshift(0x80 + data.length);\n    return data;\n  }\n\n  const length = arrayifyInteger(data.length);\n  length.unshift(0xb7 + length.length);\n\n  return length.concat(data);\n}\n\nexport function encode(object: any): string {\n  return hexlify(_encode(object));\n}\n\ninterface Decoded {\n  result: any;\n  consumed: number;\n}\n\nfunction _decodeChildren(\n  data: Uint8Array,\n  offset: number,\n  childOffset: number,\n  length: number,\n): Decoded {\n  const result = [];\n\n  while (childOffset < offset + 1 + length) {\n    const decoded = _decode(data, childOffset);\n\n    result.push(decoded.result);\n\n    childOffset += decoded.consumed;\n    if (childOffset > offset + 1 + length) {\n      throw new Error('invalid rlp');\n    }\n  }\n\n  return { consumed: 1 + length, result };\n}\n\n// returns { consumed: number, result: Object }\nfunction _decode(data: Uint8Array, offset: number): { consumed: number; result: any } {\n  if (data.length === 0) {\n    throw new Error('invalid rlp data');\n  }\n\n  // Array with extra length prefix\n  if (data[offset] >= 0xf8) {\n    const lengthLength = data[offset] - 0xf7;\n    if (offset + 1 + lengthLength > data.length) {\n      throw new Error('too short');\n    }\n\n    const length = unarrayifyInteger(data, offset + 1, lengthLength);\n    if (offset + 1 + lengthLength + length > data.length) {\n      throw new Error('to short');\n    }\n\n    return _decodeChildren(data, offset, offset + 1 + lengthLength, lengthLength + length);\n  } else if (data[offset] >= 0xc0) {\n    const length = data[offset] - 0xc0;\n    if (offset + 1 + length > data.length) {\n      throw new Error('invalid rlp data');\n    }\n\n    return _decodeChildren(data, offset, offset + 1, length);\n  } else if (data[offset] >= 0xb8) {\n    const lengthLength = data[offset] - 0xb7;\n    if (offset + 1 + lengthLength > data.length) {\n      throw new Error('invalid rlp data');\n    }\n\n    const length = unarrayifyInteger(data, offset + 1, lengthLength);\n    if (offset + 1 + lengthLength + length > data.length) {\n      throw new Error('invalid rlp data');\n    }\n\n    const result = hexlify(\n      data.slice(offset + 1 + lengthLength, offset + 1 + lengthLength + length),\n    );\n    return { consumed: 1 + lengthLength + length, result };\n  } else if (data[offset] >= 0x80) {\n    const length = data[offset] - 0x80;\n    if (offset + 1 + length > data.length) {\n      throw new Error('invlaid rlp data');\n    }\n\n    const result = hexlify(data.slice(offset + 1, offset + 1 + length));\n    return { consumed: 1 + length, result };\n  }\n  return { consumed: 1, result: hexlify(data[offset]) };\n}\n\nexport function decode(data: Arrayish): any {\n  const bytes = arrayify(data) || new Uint8Array();\n  const decoded = _decode(bytes, 0);\n  if (decoded.consumed !== bytes.length) {\n    throw new Error('invalid rlp data');\n  }\n  return decoded.result;\n}\n","/**\n * @packageDocumentation\n * @module harmony-crypto\n */\n\nimport elliptic from 'elliptic';\nimport * as bytes from './bytes';\nimport * as errors from './errors';\n\nimport { keccak256 } from './keccak256';\nimport { randomBytes } from './random';\nimport { isPrivateKey, strip0x, isAddress } from '@harmony-js/utils';\nimport { encode } from './rlp';\n\nconst secp256k1 = elliptic.ec('secp256k1');\n\n/**\n * @function generatePrivateKey\n * @description generatePrivate key using `eth-lib` settings\n * @return {string}\n */\nexport const generatePrivateKey = (): string => {\n  const entropy: string = '0x' + randomBytes(16);\n\n  const innerHex: string = keccak256(\n    bytes.concat(['0x' + randomBytes(32), entropy || '0x' + randomBytes(32)]),\n  );\n  const middleHex: Uint8Array = bytes.concat([\n    bytes.concat(['0x' + randomBytes(32), innerHex]),\n    '0x' + randomBytes(32),\n  ]);\n  const outerHex: string = keccak256(middleHex);\n  return outerHex;\n};\n\n/**\n * @function getPubkeyFromPrivateKey\n * @param  {string} privateKey - private key String\n * @return {string}\n */\nexport const getPubkeyFromPrivateKey = (privateKey: string): string => {\n  return '0x' + getPublic(privateKey, true);\n};\n\n/**\n * @function getAddressFromPrivateKey\n * @param  {string} privateKey - private key string\n * @return {string} address with `length = 40`\n */\nexport const getAddressFromPrivateKey = (privateKey: string): string => {\n  const publicHash = '0x' + getPublic(privateKey).slice(2);\n  const publicKey = keccak256(publicHash);\n  const address = '0x' + publicKey.slice(-40);\n  return address;\n};\n\nexport const getPublic = (privateKey: string, compress?: boolean): string => {\n  if (!isPrivateKey(privateKey) || !validatePrivateKey(privateKey)) {\n    throw new Error(`${privateKey} is not PrivateKey`);\n  }\n  const ecKey = secp256k1.keyFromPrivate(strip0x(privateKey), 'hex');\n\n  return ecKey.getPublic(compress || false, 'hex');\n};\n\n/**\n * @function getAddressFromPublicKey\n * @param  {string} publicKey - public key string\n * @return {string} address with `length = 40`\n */\nexport const getAddressFromPublicKey = (publicKey: string): string => {\n  const ecKey = secp256k1.keyFromPublic(publicKey.slice(2), 'hex');\n  const publicHash = ecKey.getPublic(false, 'hex');\n  const address = '0x' + keccak256('0x' + publicHash.slice(2)).slice(-40);\n  return address;\n};\n\n/**\n * @function toChecksumAddress\n * @param  {string} address - raw address\n * @return {string} checksumed address\n */\nexport const toChecksumAddress = (address: string): string => {\n  if (typeof address !== 'string' || !address.match(/^0x[0-9A-Fa-f]{40}$/)) {\n    errors.throwError('invalid address', errors.INVALID_ARGUMENT, {\n      arg: 'address',\n      value: address,\n    });\n  }\n\n  address = address.toLowerCase();\n\n  const chars = address.substring(2).split('');\n\n  let hashed = new Uint8Array(40);\n  for (let i = 0; i < 40; i++) {\n    hashed[i] = chars[i].charCodeAt(0);\n  }\n  hashed = bytes.arrayify(keccak256(hashed)) || hashed;\n\n  for (let i = 0; i < 40; i += 2) {\n    if (hashed[i >> 1] >> 4 >= 8) {\n      chars[i] = chars[i].toUpperCase();\n    }\n    if ((hashed[i >> 1] & 0x0f) >= 8) {\n      chars[i + 1] = chars[i + 1].toUpperCase();\n    }\n  }\n\n  return '0x' + chars.join('');\n};\n\nexport const sign = (digest: bytes.Arrayish | string, privateKey: string): bytes.Signature => {\n  if (!isPrivateKey(privateKey)) {\n    throw new Error(`${privateKey} is not PrivateKey`);\n  }\n\n  const keyPair = secp256k1.keyFromPrivate(strip0x(privateKey), 'hex');\n  const signature = keyPair.sign(bytes.arrayify(digest), { canonical: true });\n  const publicKey = '0x' + keyPair.getPublic(true, 'hex');\n  const result = {\n    recoveryParam: signature.recoveryParam,\n    r: bytes.hexZeroPad('0x' + signature.r.toString(16), 32),\n    s: bytes.hexZeroPad('0x' + signature.s.toString(16), 32),\n    v: 27 + signature.recoveryParam,\n  };\n\n  if (verifySignature(digest, result, publicKey)) {\n    return result;\n  } else {\n    throw new Error('signing process failed');\n  }\n};\n\nexport function getContractAddress(from: string, nonce: number): string {\n  if (!from) {\n    throw new Error('missing from address');\n  }\n\n  const addr = keccak256(encode([from, bytes.stripZeros(bytes.hexlify(nonce))]));\n  return '0x' + addr.substring(26);\n}\n\nexport function verifySignature(\n  digest: bytes.Arrayish,\n  signature: bytes.Signature,\n  publicKey: string,\n): boolean {\n  return recoverPublicKey(digest, signature) === publicKey;\n}\n\nexport function recoverPublicKey(\n  digest: bytes.Arrayish | string,\n  signature: bytes.Signature | string,\n): string {\n  const sig = bytes.splitSignature(signature);\n  const rs = { r: bytes.arrayify(sig.r), s: bytes.arrayify(sig.s) };\n\n  ////\n  const recovered = secp256k1.recoverPubKey(bytes.arrayify(digest), rs, sig.recoveryParam);\n\n  const key = recovered.encode('hex', false);\n  const ecKey = secp256k1.keyFromPublic(key, 'hex');\n  const publicKey = '0x' + ecKey.getPublic(true, 'hex');\n\n  ///\n\n  return publicKey;\n}\n\nexport function recoverAddress(\n  digest: bytes.Arrayish | string,\n  signature: bytes.Signature | string,\n): string {\n  return getAddressFromPublicKey(\n    recoverPublicKey(bytes.arrayify(digest) || new Uint8Array(), signature),\n  );\n}\n\n/**\n * isValidChecksumAddress\n *\n * takes hex-encoded string and returns boolean if address is checksumed\n *\n * @param {string} address\n * @returns {boolean}\n */\nexport const isValidChecksumAddress = (address: string): boolean => {\n  return isAddress(address.replace('0x', '')) && toChecksumAddress(address) === address;\n};\n\nexport const validatePrivateKey = (privateKey: string): boolean => {\n  const ecKey = secp256k1.keyFromPrivate(strip0x(privateKey), 'hex');\n  const { result } = ecKey.validate();\n  return result;\n};\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\n * @packageDocumentation\n * @module harmony-crypto\n */\n\nimport aes from 'aes-js';\n// import scrypt from 'scrypt.js';\nimport scrypt from 'scrypt-shim';\nimport { pbkdf2Sync } from 'pbkdf2';\nimport uuid from 'uuid';\nimport { isPrivateKey } from '@harmony-js/utils';\nimport { randomBytes } from './random';\nimport { getAddressFromPrivateKey } from './keyTool';\nimport { concat, hexToIntArray } from './bytes';\nimport { keccak256 } from './keccak256';\nimport { KDF, KDFParams, EncryptOptions, PBKDF2Params, ScryptParams, Keystore } from './types';\n\n/** @hidden */\nconst DEFAULT_ALGORITHM = 'aes-128-ctr';\n\n/**\n * getDerivedKey\n *\n * NOTE: only scrypt and pbkdf2 are supported.\n *\n * @param {Buffer} key - the passphrase\n * @param {KDF} kdf - the key derivation function to be used\n * @param {KDFParams} params - params for the kdf\n *\n * @returns {Promise<Buffer>}\n */\nasync function getDerivedKey(key: Buffer, kdf: KDF, params: KDFParams): Promise<Buffer> {\n  const salt = Buffer.from(params.salt, 'hex');\n\n  if (kdf === 'pbkdf2') {\n    const { c, dklen } = params as PBKDF2Params;\n    return pbkdf2Sync(key, salt, c, dklen, 'sha256');\n  }\n\n  if (kdf === 'scrypt') {\n    const { n, r, p, dklen } = params as ScryptParams;\n    return scrypt(key, salt, n, r, p, dklen);\n  }\n\n  throw new Error('Only pbkdf2 and scrypt are supported');\n}\n\n/**\n * This method will map the current Account object to V3Keystore object.\n *\n * @method encrypt\n *\n * @param {string} privateKey\n * @param {string} password\n * @param {object} options\n *\n * @return {{version, id, address, crypto}}\n */\nexport const encrypt = async (\n  privateKey: string,\n  password: string,\n  options?: EncryptOptions,\n): Promise<string> => {\n  if (!isPrivateKey(privateKey)) {\n    throw new Error('privateKey is not correct');\n  }\n  if (typeof password !== 'string') {\n    throw new Error('password is not found');\n  }\n  const address = getAddressFromPrivateKey(privateKey);\n\n  const salt = randomBytes(32);\n  const iv = Buffer.from(randomBytes(16), 'hex');\n  const kdf = options !== undefined ? (options.kdf ? options.kdf : 'scrypt') : 'scrypt';\n  const level = options !== undefined ? (options.level ? options.level : 8192) : 8192;\n\n  const uuidRandom = options !== undefined ? options.uuid : undefined;\n\n  const n = kdf === 'pbkdf2' ? 262144 : level;\n  const kdfparams = {\n    salt,\n    n,\n    r: 8,\n    p: 1,\n    dklen: 32,\n  };\n\n  const derivedKey = await getDerivedKey(Buffer.from(password), kdf, kdfparams);\n  const cipher = new aes.ModeOfOperation.ctr(derivedKey.slice(0, 16), new aes.Counter(iv));\n\n  if (!cipher) {\n    throw new Error('Unsupported cipher');\n  }\n\n  const ciphertext = Buffer.from(cipher.encrypt(Buffer.from(privateKey.replace('0x', ''), 'hex')));\n\n  const mac = keccak256(concat([derivedKey.slice(16, 32), ciphertext]));\n\n  return JSON.stringify({\n    version: 3,\n    id: uuid.v4({ random: uuidRandom || hexToIntArray(randomBytes(16)) }),\n    address: address.toLowerCase().replace('0x', ''),\n    crypto: {\n      ciphertext: ciphertext.toString('hex'),\n      cipherparams: {\n        iv: iv.toString('hex'),\n      },\n      cipher: DEFAULT_ALGORITHM,\n      kdf,\n      kdfparams,\n      mac: mac.replace('0x', ''),\n    },\n  });\n};\n\n/**\n * @function decrypt\n * @param  {Keystore} keystore - Keystore file\n * @param  {string} password - password string\n * @return {string} privateKey\n */\nexport const decrypt = async (keystore: Keystore, password: string): Promise<string> => {\n  const ciphertext = Buffer.from(keystore.crypto.ciphertext, 'hex');\n  const iv = Buffer.from(keystore.crypto.cipherparams.iv, 'hex');\n  const { kdfparams } = keystore.crypto;\n\n  const derivedKey = await getDerivedKey(Buffer.from(password), keystore.crypto.kdf, kdfparams);\n\n  const mac = keccak256(concat([derivedKey.slice(16, 32), ciphertext])).replace('0x', '');\n\n  if (mac.toUpperCase() !== keystore.crypto.mac.toUpperCase()) {\n    return Promise.reject(new Error('Failed to decrypt.'));\n  }\n\n  const CTR = aes.ModeOfOperation.ctr;\n\n  const cipher = new CTR(derivedKey.slice(0, 16), new aes.Counter(iv));\n\n  const decrypted = '0x' + Buffer.from(cipher.decrypt(ciphertext)).toString('hex');\n  return decrypted;\n};\n\n/**\n * encrypt Phrase\n */\nexport const encryptPhrase = async (\n  phrase: string,\n  password: string,\n  options?: EncryptOptions,\n): Promise<string> => {\n  if (typeof password !== 'string') {\n    throw new Error('password is not found');\n  }\n  const salt = randomBytes(32);\n  const iv = Buffer.from(randomBytes(16), 'hex');\n  const kdf = options !== undefined ? (options.kdf ? options.kdf : 'scrypt') : 'scrypt';\n  const level = options !== undefined ? (options.level ? options.level : 8192) : 8192;\n\n  const uuidRandom = options !== undefined ? options.uuid : undefined;\n\n  const n = kdf === 'pbkdf2' ? 262144 : level;\n  const kdfparams = {\n    salt,\n    n,\n    r: 8,\n    p: 1,\n    dklen: 32,\n  };\n  const derivedKey = await getDerivedKey(Buffer.from(password), kdf, kdfparams);\n  const cipher = new aes.ModeOfOperation.ctr(derivedKey.slice(0, 16), new aes.Counter(iv));\n\n  if (!cipher) {\n    throw new Error('Unsupported cipher');\n  }\n\n  const ciphertext = Buffer.from(cipher.encrypt(Buffer.from(phrase)));\n\n  const mac = keccak256(concat([derivedKey.slice(16, 32), ciphertext]));\n  return JSON.stringify({\n    version: 3,\n    id: uuid.v4({ random: uuidRandom || hexToIntArray(randomBytes(16)) }),\n    crypto: {\n      ciphertext: ciphertext.toString('hex'),\n      cipherparams: {\n        iv: iv.toString('hex'),\n      },\n      cipher: DEFAULT_ALGORITHM,\n      kdf,\n      kdfparams,\n      mac: mac.replace('0x', ''),\n    },\n  });\n};\n\n/**\n * decrypt phrase\n */\nexport const decryptPhrase = async (keystore: Keystore, password: string): Promise<string> => {\n  const result = await decrypt(keystore, password);\n  return Buffer.from(result.replace('0x', ''), 'hex').toString();\n};\n","/**\n * @packageDocumentation\n * @module harmony-crypto\n * @hidden\n */\n\nimport { isAddress } from '@harmony-js/utils';\n\nimport { toChecksumAddress } from './keyTool';\n// This code is taken from https://github.com/sipa/bech32/tree/bdc264f84014c234e908d72026b7b780122be11f/ref/javascript\n// Copyright (c) 2017 Pieter Wuille\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nconst CHARSET = 'qpzry9x8gf2tvdw0s3jn54khce6mua7l';\nconst GENERATOR = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\n\nconst polymod = (values: Buffer): number => {\n  let chk = 1;\n  // tslint:disable-next-line\n  for (let p = 0; p < values.length; ++p) {\n    const top = chk >> 25;\n    chk = ((chk & 0x1ffffff) << 5) ^ values[p];\n    for (let i = 0; i < 5; ++i) {\n      if ((top >> i) & 1) {\n        chk ^= GENERATOR[i];\n      }\n    }\n  }\n  return chk;\n};\n\nconst hrpExpand = (hrp: string): Buffer => {\n  const ret = [];\n  let p;\n  for (p = 0; p < hrp.length; ++p) {\n    ret.push(hrp.charCodeAt(p) >> 5);\n  }\n  ret.push(0);\n  for (p = 0; p < hrp.length; ++p) {\n    ret.push(hrp.charCodeAt(p) & 31);\n  }\n  return Buffer.from(ret);\n};\n\nfunction verifyChecksum(hrp: string, data: Buffer) {\n  return polymod(Buffer.concat([hrpExpand(hrp), data])) === 1;\n}\n\nfunction createChecksum(hrp: string, data: Buffer) {\n  const values = Buffer.concat([\n    Buffer.from(hrpExpand(hrp)),\n    data,\n    Buffer.from([0, 0, 0, 0, 0, 0]),\n  ]);\n  // var values = hrpExpand(hrp).concat(data).concat([0, 0, 0, 0, 0, 0]);\n  const mod = polymod(values) ^ 1;\n  const ret = [];\n  for (let p = 0; p < 6; ++p) {\n    ret.push((mod >> (5 * (5 - p))) & 31);\n  }\n  return Buffer.from(ret);\n}\n\nexport const bech32Encode = (hrp: string, data: Buffer) => {\n  const combined = Buffer.concat([data, createChecksum(hrp, data)]);\n  let ret = hrp + '1';\n  // tslint:disable-next-line\n  for (let p = 0; p < combined.length; ++p) {\n    ret += CHARSET.charAt(combined[p]);\n  }\n  return ret;\n};\n\nexport const bech32Decode = (bechString: string) => {\n  let p;\n  let hasLower = false;\n  let hasUpper = false;\n  for (p = 0; p < bechString.length; ++p) {\n    if (bechString.charCodeAt(p) < 33 || bechString.charCodeAt(p) > 126) {\n      return null;\n    }\n    if (bechString.charCodeAt(p) >= 97 && bechString.charCodeAt(p) <= 122) {\n      hasLower = true;\n    }\n    if (bechString.charCodeAt(p) >= 65 && bechString.charCodeAt(p) <= 90) {\n      hasUpper = true;\n    }\n  }\n  if (hasLower && hasUpper) {\n    return null;\n  }\n  bechString = bechString.toLowerCase();\n  const pos = bechString.lastIndexOf('1');\n  if (pos < 1 || pos + 7 > bechString.length || bechString.length > 90) {\n    return null;\n  }\n  const hrp = bechString.substring(0, pos);\n  const data = [];\n  for (p = pos + 1; p < bechString.length; ++p) {\n    const d = CHARSET.indexOf(bechString.charAt(p));\n    if (d === -1) {\n      return null;\n    }\n    data.push(d);\n  }\n\n  if (!verifyChecksum(hrp, Buffer.from(data))) {\n    return null;\n  }\n\n  return { hrp, data: Buffer.from(data.slice(0, data.length - 6)) };\n};\n\n// HRP is the human-readable part of Harmony bech32 addresses\nexport const HRP = 'one';\nexport const tHRP = 'tone';\n\n/**\n * convertBits\n *\n * groups buffers of a certain width to buffers of the desired width.\n *\n * For example, converts byte buffers to buffers of maximum 5 bit numbers,\n * padding those numbers as necessary. Necessary for encoding Ethereum-style\n * addresses as bech32 ones.\n *\n * @param {Buffer} data\n * @param {number} fromWidth\n * @param {number} toWidth\n * @param {boolean} pad\n * @returns {Buffer|null}\n */\nexport const convertBits = (\n  data: Buffer,\n  fromWidth: number,\n  toWidth: number,\n  pad: boolean = true,\n) => {\n  let acc = 0;\n  let bits = 0;\n  const ret = [];\n  const maxv = (1 << toWidth) - 1;\n  // tslint:disable-next-line\n  for (let p = 0; p < data.length; ++p) {\n    const value = data[p];\n    if (value < 0 || value >> fromWidth !== 0) {\n      return null;\n    }\n    acc = (acc << fromWidth) | value;\n    bits += fromWidth;\n    while (bits >= toWidth) {\n      bits -= toWidth;\n      ret.push((acc >> bits) & maxv);\n    }\n  }\n\n  if (pad) {\n    if (bits > 0) {\n      ret.push((acc << (toWidth - bits)) & maxv);\n    }\n  } else if (bits >= fromWidth || (acc << (toWidth - bits)) & maxv) {\n    return null;\n  }\n\n  return Buffer.from(ret);\n};\n\n/**\n * toBech32Address\n *\n * bech32Encodes a canonical 20-byte Ethereum-style address as a bech32 Harmony\n * address.\n *\n * The expected format is one1<address><checksum> where address and checksum\n * are the result of bech32 encoding a Buffer containing the address bytes.\n *\n * @param {string} 20 byte canonical address\n * @returns {string} 38 char bech32 bech32Encoded Harmony address\n */\nexport const toBech32 = (address: string, useHRP: string = HRP): string => {\n  if (!isAddress(address)) {\n    throw new Error('Invalid address format.');\n  }\n\n  const addrBz = convertBits(Buffer.from(address.replace('0x', ''), 'hex'), 8, 5);\n\n  if (addrBz === null) {\n    throw new Error('Could not convert byte Buffer to 5-bit Buffer');\n  }\n\n  return bech32Encode(useHRP, addrBz);\n};\n\n/**\n * fromBech32Address\n *\n * @param {string} address - a valid Harmony bech32 address\n * @returns {string} a canonical 20-byte Ethereum-style address\n */\nexport const fromBech32 = (address: string, useHRP: string = HRP): string => {\n  const res = bech32Decode(address);\n\n  if (res === null) {\n    throw new Error('Invalid bech32 address');\n  }\n\n  const { hrp, data } = res;\n\n  if (hrp !== useHRP) {\n    throw new Error(`Expected hrp to be ${useHRP} but got ${hrp}`);\n  }\n\n  const buf = convertBits(data, 5, 8, false);\n\n  if (buf === null) {\n    throw new Error('Could not convert buffer to bytes');\n  }\n\n  return toChecksumAddress('0x' + buf.toString('hex'));\n};\n","/**\n * @packageDocumentation\n * @module harmony-crypto\n * @ignore\n */\n\nexport type KDF = 'pbkdf2' | 'scrypt';\n\nexport interface PBKDF2Params {\n  salt: string;\n  dklen: number;\n  c: number;\n}\n\nexport interface ScryptParams {\n  salt: string;\n  dklen: number;\n  n: number;\n  r: number;\n  p: number;\n}\n\nexport type KDFParams = PBKDF2Params | ScryptParams;\n\nexport interface EncryptOptions {\n  kdf?: KDF;\n  level?: number;\n  uuid?: number[];\n}\n\nexport interface Keystore {\n  address?: string;\n  crypto: {\n    cipher: string;\n    cipherparams: {\n      iv: string;\n    };\n    ciphertext: string;\n    kdf: KDF;\n    kdfparams: KDFParams;\n    mac: string;\n  };\n  id: string;\n  version: 3;\n}\n","/**\n * @packageDocumentation\n * @module harmony-crypto\n */\n\nimport { isAddress, isBech32Address, isBech32TestNetAddress } from '@harmony-js/utils';\n\nimport { toChecksumAddress } from './keyTool';\nimport { fromBech32, toBech32, HRP, tHRP } from './bech32';\n\n/**\n * ### How to use it?\n *\n * ```\n * // Step 1: import the class\n * const { HarmonyAddress } = require('@harmony-js/crypto');\n *\n * // Step 2: call functions\n * const addr = 'one103q7qe5t2505lypvltkqtddaef5tzfxwsse4z7'\n * const res = HarmonyAddress.isValidBech32(addr);\n * console.log(res);\n * ```\n */\nexport class HarmonyAddress {\n  /**\n   * @example\n   * ```\n   * const addr = 'one103q7qe5t2505lypvltkqtddaef5tzfxwsse4z7'\n   * const res = HarmonyAddress.isValidBech32(addr);\n   * console.log(res);\n   * ```\n   */\n  static isValidBasic(str: string) {\n    const toTest = new HarmonyAddress(str);\n    return toTest.raw === toTest.basic;\n  }\n\n  /**\n   * @example\n   * ```\n   * const addr = 'one103q7qe5t2505lypvltkqtddaef5tzfxwsse4z7'\n   * const res = HarmonyAddress.isValidChecksum(addr);\n   * console.log(res);\n   * ```\n   */\n  static isValidChecksum(str: string) {\n    const toTest = new HarmonyAddress(str);\n    return toTest.raw === toTest.checksum;\n  }\n\n  /**\n   * @example\n   * ```\n   * const addr = 'one103q7qe5t2505lypvltkqtddaef5tzfxwsse4z7'\n   * const res = HarmonyAddress.isValidBech32(addr);\n   * console.log(res);\n   * ```\n   */\n  static isValidBech32(str: string) {\n    const toTest = new HarmonyAddress(str);\n    return toTest.raw === toTest.bech32;\n  }\n\n  /**\n   * @example\n   * ```\n   * const addr = 'one103q7qe5t2505lypvltkqtddaef5tzfxwsse4z7'\n   * const res = HarmonyAddress.isValidBech32TestNet(addr);\n   * console.log(res);\n   * ```\n   */\n  static isValidBech32TestNet(str: string) {\n    const toTest = new HarmonyAddress(str);\n    return toTest.raw === toTest.bech32TestNet;\n  }\n\n  raw: string;\n  basic: string;\n\n  /**\n   * get basicHex of the address\n   *\n   * @example\n   * ```\n   * const addr = 'one103q7qe5t2505lypvltkqtddaef5tzfxwsse4z7'\n   * const instance = new HarmonyAddress(addr);\n   * console.log(instance.basicHex);\n   * ```\n   */\n  get basicHex() {\n    return `0x${this.basic}`;\n  }\n\n  /**\n   * @example\n   * ```\n   * const addr = 'one103q7qe5t2505lypvltkqtddaef5tzfxwsse4z7'\n   * const instance = new HarmonyAddress(addr);\n   * console.log(instance.checksum);\n   * ```\n   */\n  get checksum() {\n    return toChecksumAddress(`0x${this.basic}`);\n  }\n\n  /**\n   * @example\n   * ```\n   * const addr = 'one103q7qe5t2505lypvltkqtddaef5tzfxwsse4z7'\n   * const instance = new HarmonyAddress(addr);\n   * console.log(instance.bech32);\n   * ```\n   */\n  get bech32() {\n    return toBech32(this.basic, HRP);\n  }\n\n  /**\n   * @example\n   * ```\n   * const addr = 'one103q7qe5t2505lypvltkqtddaef5tzfxwsse4z7'\n   * const instance = new HarmonyAddress(addr);\n   * console.log(instance.bech32TestNet);\n   * ```\n   */\n  get bech32TestNet() {\n    return toBech32(this.basic, tHRP);\n  }\n\n  constructor(raw: string) {\n    this.raw = raw;\n    this.basic = this.getBasic(this.raw);\n  }\n\n  /**\n   * Check whether the address has an valid address format\n   *\n   * @param addr string, the address\n   *\n   * @example\n   * ```\n   * const addr = 'one103q7qe5t2505lypvltkqtddaef5tzfxwsse4z7'\n   * const instance = new HarmonyAddress(addr);\n   * const res = instance.getBasic(addr);\n   * console.log(res)\n   * ```\n   */\n  private getBasic(addr: string) {\n    const basicBool = isAddress(addr);\n    const bech32Bool = isBech32Address(addr);\n    const bech32TestNetBool = isBech32TestNetAddress(addr);\n\n    if (basicBool) {\n      return addr.replace('0x', '').toLowerCase();\n    }\n\n    if (bech32Bool) {\n      const fromB32 = fromBech32(addr, HRP);\n      return fromB32.replace('0x', '').toLowerCase();\n    }\n\n    if (bech32TestNetBool) {\n      const fromB32TestNet = fromBech32(addr, tHRP);\n      return fromB32TestNet.replace('0x', '').toLowerCase();\n    }\n\n    throw new Error(`\"${addr}\" is an invalid address format`);\n  }\n}\n\n/**\n * Using this function to get Harmony format address\n *\n * @param address\n *\n * @example\n * ```javascript\n * const { Harmony } = require('@harmony-js/core');\n * const { ChainID, ChainType } = require('@harmony-js/utils');\n * const { randomBytes } = require('@harmony-js/crypto')\n *\n * const hmy = new Harmony(\n *   'http://localhost:9500',\n *   {\n *   chainType: ChainType.Harmony,\n *   chainId: ChainID.HmyLocal,\n *   },\n * );\n *\n * const bytes = randomBytes(20);\n * const hAddress = hmy.crypto.getAddress(bytes);\n * console.log(hAddress)\n * ```\n */\nexport function getAddress(address: string) {\n  try {\n    return new HarmonyAddress(address);\n  } catch (error) {\n    throw error;\n  }\n}\n","/**\n * @packageDocumentation\n * @module harmony-crypto\n * @ignore\n */\n\nimport hdkey from 'hdkey';\nimport bip39 from 'bip39';\nimport BN from 'bn.js';\n\nexport * from './random';\nexport * from './keyTool';\nexport * from './keystore';\nexport * from './bytes';\nexport * from './rlp';\nexport * from './keccak256';\nexport * from './errors';\nexport * from './bech32';\n\n// export types\nexport * from './types';\nexport * from './address';\n\nexport { hdkey, bip39, BN };\n"],"names":["errors.throwError","errors.INVALID_ARGUMENT","errors.NUMERIC_FAULT","sha3.keccak_256","bytes.concat","isPrivateKey","strip0x","bytes.arrayify","bytes.hexZeroPad","bytes.stripZeros","bytes.hexlify","bytes.splitSignature","isAddress","pbkdf2Sync","isBech32Address","isBech32TestNetAddress"],"mappings":"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"}