{"version":3,"file":"index.esm.js","sources":["../../../node_modules/tslib/tslib.es6.js","../src/abi/abiCoder.ts","../src/abi/utils.ts","../src/abi/api.ts","../src/abi/index.ts","../src/models/AbiItemModel.ts","../src/models/AbiModel.ts","../src/utils/mapper.ts","../src/utils/encoder.ts","../src/utils/status.ts","../src/methods/method.ts","../src/methods/methodFactory.ts","../src/utils/decoder.ts","../src/utils/formatter.ts","../src/events/event.ts","../src/events/eventFactory.ts","../src/contract.ts","../src/contractFactory.ts","../src/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\n * ## About this package\n *\n * `@harmony-js/contract` makes it easy to interact with smart contract on the Harmony Blockchain. This allows you to interact with smart contracts as if they were JavaScript objects.\n *\n * ## How to use this package\n *\n * ### Deploy a contract to blockchain\n * ```javascript\n * // Step 1: Use Solidity to build a sample contract instance\n * contract Inbox {\n *   string public message;\n *   constructor() public {\n *     message = \"hello\";\n *   }\n *   function setMessage(string memory newMessage) public {\n *     message = newMessage;\n *   }\n * }\n *\n * // Step 2: Use truffle to compile the contract\n * $ truffle compile\n *\n * // Step 3: Use truffle to deploy the contract (by truffle)\n * $ truffle migrate --network local --reset\n * $ truffle migrate --network testnet --reset\n * ```\n * [Tutorial: using truffle to compile and deploy smart-contract](https://github.com/harmony-one/HRC/tree/master/examples/dapp_Lottery)\n *\n * ### Interact with the contract\n * ```javascript\n * // Step 1: create a harmony instance\n * const { Harmony } = require('@harmony-js/core');\n * const { ChainID, ChainType } = require('@harmony-js/utils');\n * const hmy = new Harmony(\n *   // let's assume we deploy smart contract to this end-point URL\n *   'https://api.s0.b.hmny.io'\n *   {\n *     chainType: ChainType.Harmony,\n *     chainId: ChainID.HmyLocal,\n *   }\n * )\n *\n * // Step 2: get a contract instance\n * const getContractInstance = (hmy, artifact) => {\n *   return hmy.contracts.createContract(artifact.abi, address);\n * }\n * const inbox = getContractInstance(hmy, inboxJson)\n *\n * // Step 3: interact with the instance\n * // Example 1: methods.myMethod.call()\n * const message = await inbox.methods.message().call();\n * console.log(message);\n *\n * // Example 2: methods.myMethod.send()\n * inbox.methods.setMessage('666').send({\n *   gasLimit: '1000001',\n *   gasPrice: new hmy.utils.Unit('10').asGwei().toWei(),\n * });\n * ```\n *\n * ### Integrate MathWallet\n * Using MathWallet to sign Transaction\n * ```javascript\n * // Step 0: set up MathWallet extension on Chrome\n *\n * // Step 1: Create a harmonyExtension instance\n * const { Harmony, HarmonyExtension } = require('@harmony-js/core');\n * let hmyEx, ExContract;\n * export const initExtension = async() => {\n *   hmyEx = await new HarmonyExtension(window.harmony);\n *\n *   exContract = hmyEx.contracts.createContract(abi, address);\n *   return exContract;\n * };\n *\n * // Step 2: interact with hmyEx instance\n * // wait for hmy inject into window\n * async componentDidMount() {\n *   ...\n *   await waitForInjected()\n *   ...\n * }\n * // Example: methods.myMethod.send()\n * onSubmit = async event => {\n *   const exContract = await initExtension()\n *   await exContract.methods.Mymethod().send({\n *     value: new hmy.utils.Unit('1').asOne().toWei(),\n *   })\n * }\n *\n * // wait for injected\n * export const waitForInjected = () => new Promise((resolve) => {\n *   const check = () => {\n *     if (!window.harmony) setTimeout(check, 250);\n *     else resolve(window.harmony);\n *   }\n *   check();\n * });\n * ```\n *\n * ## [More Examples: HRC repo](https://github.com/harmony-one/HRC/tree/master/examples)\n * - Lottery\n * - HRC 20\n * - HRC 721\n * - Node-dao\n * - Node-faucet\n *\n * @packageDocumentation\n * @module harmony-contract\n */\n\n// this file is mainly ported from `ethers.js`, but done some fixes\n// 1. added bytesPadRight support\n// 2. ts-lint\n// 3. use BN as default Bignumber instance\n\nimport {\n  BN,\n  info,\n  throwError,\n  INVALID_ARGUMENT,\n  arrayify,\n  hexlify,\n  padZeros,\n  concat,\n  toChecksumAddress,\n  checkArgumentCount,\n  checkNormalize,\n  Arrayish,\n  checkNew,\n  bytesPadRight,\n} from '@harmony-js/crypto';\nimport { hexToBN, defineReadOnly } from '@harmony-js/utils';\n\n/** @hidden */\nconst NegativeOne: BN = new BN(-1);\n/** @hidden */\nconst One: BN = new BN(1);\n/** @hidden */\nconst Zero: BN = new BN(0);\n/** @hidden */\nconst HashZero = '0x0000000000000000000000000000000000000000000000000000000000000000';\n/** @hidden */\nconst MaxUint256: BN = hexToBN(\n  '0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff',\n);\n\n/** @hidden */\nexport type CoerceFunc = (type: string, value: any) => any;\n\n/** @hidden */\nexport interface ParamType {\n  name?: string;\n  type: string;\n  indexed?: boolean;\n  components?: any[];\n}\n\n// @TODO: should this just be a combined Fragment?\n\n/** @hidden */\nexport interface EventFragment {\n  type: string;\n  name: string;\n\n  anonymous: boolean;\n\n  inputs: ParamType[];\n}\n\n/** @hidden */\nexport interface FunctionFragment {\n  type: string;\n  name: string;\n\n  constant: boolean;\n\n  inputs: ParamType[];\n  outputs: ParamType[];\n\n  payable: boolean;\n  stateMutability: string | null;\n\n  gas: BN | null;\n}\n\n///////////////////////////////\n/** @hidden */\nconst paramTypeBytes = new RegExp(/^bytes([0-9]*)$/);\n/** @hidden */\nconst paramTypeNumber = new RegExp(/^(u?int)([0-9]*)$/);\n/** @hidden */\nconst paramTypeArray = new RegExp(/^(.*)\\[([0-9]*)\\]$/);\n\n/** @hidden */\nexport const defaultCoerceFunc: CoerceFunc = (type: string, value: any): any => {\n  const match = type.match(paramTypeNumber);\n  if (match && parseInt(match[2], 10) <= 48) {\n    // return value.toNumber();\n    return value.toString('hex');\n  }\n  return value;\n};\n\n///////////////////////////////////\n// Parsing for Solidity Signatures\n\n///////////////////////////////////\n// Parsing for Solidity Signatures\n\n/** @hidden */\nconst regexParen = new RegExp('^([^)(]*)\\\\((.*)\\\\)([^)(]*)$');\n/** @hidden */\nconst regexIdentifier = new RegExp('^[A-Za-z_][A-Za-z0-9_]*$');\n\n/** @hidden */\nfunction verifyType(type: string): string {\n  // These need to be transformed to their full description\n  if (type.match(/^uint($|[^1-9])/)) {\n    type = 'uint256' + type.substring(4);\n  } else if (type.match(/^int($|[^1-9])/)) {\n    type = 'int256' + type.substring(3);\n  }\n\n  return type;\n}\n\n/** @hidden */\ninterface ParseState {\n  allowArray?: boolean;\n  allowName?: boolean;\n  allowParams?: boolean;\n  allowType?: boolean;\n  readArray?: boolean;\n}\n\n/** @hidden */\ninterface ParseNode {\n  parent?: any;\n  type?: string;\n  name?: string;\n  state?: ParseState;\n  indexed?: boolean;\n  components?: any[];\n}\n\n/** @hidden */\nfunction parseParam(param: string, allowIndexed?: boolean): ParamType {\n  const originalParam = param;\n  // tslint:disable-next-line: no-shadowed-variable\n  function throwError(i: number) {\n    throw new Error(\n      'unexpected character \"' +\n        originalParam[i] +\n        '\" at position ' +\n        i +\n        ' in \"' +\n        originalParam +\n        '\"',\n    );\n  }\n  param = param.replace(/\\s/g, ' ');\n\n  const parent: ParseNode = { type: '', name: '', state: { allowType: true } };\n  let node = parent;\n\n  for (let i = 0; i < param.length; i++) {\n    const c = param[i];\n    switch (c) {\n      case '(':\n        if (!node.state || !node.state.allowParams) {\n          throwError(i);\n        }\n        if (node.state) {\n          node.state.allowType = false;\n        }\n        if (node.type) {\n          node.type = verifyType(node.type);\n        }\n\n        node.components = [{ type: '', name: '', parent: node, state: { allowType: true } }];\n        node = node.components[0];\n        break;\n\n      case ')':\n        delete node.state;\n        if (allowIndexed && node.name === 'indexed') {\n          node.indexed = true;\n          node.name = '';\n        }\n        if (node.type) {\n          node.type = verifyType(node.type);\n        }\n\n        const child = node;\n        node = node.parent;\n        if (!node) {\n          throwError(i);\n        }\n        delete child.parent;\n        if (node.state) {\n          node.state.allowParams = false;\n          node.state.allowName = true;\n          node.state.allowArray = true;\n        }\n\n        break;\n\n      case ',':\n        delete node.state;\n        if (allowIndexed && node.name === 'indexed') {\n          node.indexed = true;\n          node.name = '';\n        }\n        if (node.type) {\n          node.type = verifyType(node.type);\n        }\n\n        const sibling: ParseNode = {\n          type: '',\n          name: '',\n          parent: node.parent,\n          state: { allowType: true },\n        };\n        node.parent.components.push(sibling);\n        delete node.parent;\n        node = sibling;\n        break;\n\n      // Hit a space...\n      case ' ':\n        // If reading type, the type is done and may read a param or name\n        if (node.state) {\n          if (node.state.allowType) {\n            if (node.type !== '' && node.type) {\n              node.type = verifyType(node.type);\n              delete node.state.allowType;\n              node.state.allowName = true;\n              node.state.allowParams = true;\n            }\n          }\n\n          // If reading name, the name is done\n          if (node.state.allowName) {\n            if (node.name !== '') {\n              if (allowIndexed && node.name === 'indexed') {\n                node.indexed = true;\n                node.name = '';\n              } else {\n                node.state.allowName = false;\n              }\n            }\n          }\n        }\n\n        break;\n\n      case '[':\n        if (!node.state || !node.state.allowArray) {\n          throwError(i);\n        }\n        if (node.state) {\n          node.type += c;\n          node.state.allowArray = false;\n          node.state.allowName = false;\n          node.state.readArray = true;\n        }\n\n        break;\n\n      case ']':\n        if (!node.state || !node.state.readArray) {\n          throwError(i);\n        }\n        if (node.state) {\n          node.type += c;\n\n          node.state.readArray = false;\n          node.state.allowArray = true;\n          node.state.allowName = true;\n        }\n\n        break;\n\n      default:\n        if (node.state) {\n          if (node.state.allowType) {\n            node.type += c;\n            node.state.allowParams = true;\n            node.state.allowArray = true;\n          } else if (node.state.allowName) {\n            node.name += c;\n            delete node.state.allowArray;\n          } else if (node.state.readArray) {\n            node.type += c;\n          } else {\n            throwError(i);\n          }\n        }\n    }\n  }\n\n  if (node.parent) {\n    throw new Error('unexpected eof');\n  }\n\n  delete parent.state;\n\n  if (allowIndexed && node.name === 'indexed') {\n    node.indexed = true;\n    node.name = '';\n  }\n\n  if (parent.type) {\n    parent.type = verifyType(parent.type);\n  }\n\n  return <ParamType>parent;\n}\n\n// @TODO: Better return type\n/** @hidden */\nfunction parseSignatureEvent(fragment: string): EventFragment {\n  const abi: EventFragment = {\n    anonymous: false,\n    inputs: [],\n    name: '',\n    type: 'event',\n  };\n\n  const match = fragment.match(regexParen);\n  if (!match) {\n    throw new Error('invalid event: ' + fragment);\n  }\n\n  abi.name = match[1].trim();\n\n  splitNesting(match[2]).forEach((param) => {\n    param = parseParam(param, true);\n    param.indexed = !!param.indexed;\n    abi.inputs.push(param);\n  });\n\n  match[3].split(' ').forEach((modifier) => {\n    switch (modifier) {\n      case 'anonymous':\n        abi.anonymous = true;\n        break;\n      case '':\n        break;\n      default:\n        info('unknown modifier: ' + modifier);\n    }\n  });\n\n  if (abi.name && !abi.name.match(regexIdentifier)) {\n    throw new Error('invalid identifier: \"' + abi.name + '\"');\n  }\n\n  return abi;\n}\n\n/** @hidden */\nexport function parseParamType(type: string): ParamType {\n  return parseParam(type, true);\n}\n\n// @TODO: Allow a second boolean to expose names\n/** @hidden */\nexport function formatParamType(paramType: ParamType): string {\n  return getParamCoder(defaultCoerceFunc, paramType).type;\n}\n\n/** @hidden */\nfunction parseSignatureFunction(fragment: string): FunctionFragment {\n  const abi: FunctionFragment = {\n    constant: false,\n    gas: null,\n    inputs: [],\n    name: '',\n    outputs: [],\n    payable: false,\n    stateMutability: null, // @TODO: Should this be initialized to 'nonpayable'?\n    type: 'function',\n  };\n\n  let comps = fragment.split('@');\n  if (comps.length !== 1) {\n    if (comps.length > 2) {\n      throw new Error('invalid signature');\n    }\n    if (!comps[1].match(/^[0-9]+$/)) {\n      throw new Error('invalid signature gas');\n    }\n    abi.gas = new BN(comps[1]);\n    fragment = comps[0];\n  }\n\n  comps = fragment.split(' returns ');\n  const left = comps[0].match(regexParen);\n  if (!left) {\n    throw new Error('invalid signature');\n  }\n\n  abi.name = left[1].trim();\n  if (!abi.name.match(regexIdentifier)) {\n    throw new Error('invalid identifier: \"' + left[1] + '\"');\n  }\n\n  splitNesting(left[2]).forEach((param) => {\n    abi.inputs.push(parseParam(param));\n  });\n\n  left[3].split(' ').forEach((modifier) => {\n    switch (modifier) {\n      case 'constant':\n        abi.constant = true;\n        break;\n      case 'payable':\n        abi.payable = true;\n        abi.stateMutability = 'payable';\n        break;\n      case 'pure':\n        abi.constant = true;\n        abi.stateMutability = 'pure';\n        break;\n      case 'view':\n        abi.constant = true;\n        abi.stateMutability = 'view';\n        break;\n      case 'external':\n      case 'public':\n      case '':\n        break;\n      default:\n        info('unknown modifier: ' + modifier);\n    }\n  });\n\n  // We have outputs\n  if (comps.length > 1) {\n    const right = comps[1].match(regexParen);\n    if (right === null || right[1].trim() !== '' || right[3].trim() !== '') {\n      throw new Error('unexpected tokens');\n    }\n\n    splitNesting(right[2]).forEach((param) => {\n      abi.outputs.push(parseParam(param));\n    });\n  }\n\n  if (abi.name === 'constructor') {\n    abi.type = 'constructor';\n\n    if (abi.outputs.length) {\n      throw new Error('constructor may not have outputs');\n    }\n\n    delete abi.name;\n    delete abi.outputs;\n  }\n\n  return abi;\n}\n\n// @TODO: Allow a second boolean to expose names and modifiers\n/** @hidden */\nexport function formatSignature(fragment: EventFragment | FunctionFragment): string {\n  return fragment.name + '(' + fragment.inputs.map((i) => formatParamType(i)).join(',') + ')';\n}\n\n/** @hidden */\nexport function parseSignature(fragment: string): EventFragment | FunctionFragment {\n  if (typeof fragment === 'string') {\n    // Make sure the \"returns\" is surrounded by a space and all whitespace is exactly one space\n    fragment = fragment.replace(/\\s/g, ' ');\n    fragment = fragment\n      .replace(/\\(/g, ' (')\n      .replace(/\\)/g, ') ')\n      .replace(/\\s+/g, ' ');\n    fragment = fragment.trim();\n\n    if (fragment.substring(0, 6) === 'event ') {\n      return parseSignatureEvent(fragment.substring(6).trim());\n    } else {\n      if (fragment.substring(0, 9) === 'function ') {\n        fragment = fragment.substring(9);\n      }\n      return parseSignatureFunction(fragment.trim());\n    }\n  }\n\n  throw new Error('unknown signature');\n}\n\n///////////////////////////////////\n// Coders\n/** @hidden */\ninterface DecodedResult {\n  consumed: number;\n  value: any;\n}\n\n/** @hidden */\nabstract class Coder {\n  readonly coerceFunc: CoerceFunc;\n  readonly name: string;\n  readonly type: string;\n  readonly localName?: string;\n  readonly dynamic: boolean;\n  constructor(\n    coerceFunc: CoerceFunc,\n    name: string,\n    type: string,\n    localName: string | undefined,\n    dynamic: boolean,\n  ) {\n    this.coerceFunc = coerceFunc;\n    this.name = name;\n    this.type = type;\n    this.localName = localName;\n    this.dynamic = dynamic;\n  }\n\n  abstract encode(value: any): Uint8Array;\n  abstract decode(data: Uint8Array, offset: number): DecodedResult;\n}\n\n// Clones the functionality of an existing Coder, but without a localName\n// tslint:disable-next-line: max-classes-per-file\n/** @hidden */\nclass CoderAnonymous extends Coder {\n  private coder: Coder;\n  constructor(coder: Coder) {\n    super(coder.coerceFunc, coder.name, coder.type, undefined, coder.dynamic);\n    this.coder = coder;\n  }\n  encode(value: any): Uint8Array {\n    return this.coder.encode(value);\n  }\n  decode(data: Uint8Array, offset: number): DecodedResult {\n    return this.coder.decode(data, offset);\n  }\n}\n\n// tslint:disable-next-line: max-classes-per-file\n/** @hidden */\nclass CoderNull extends Coder {\n  constructor(coerceFunc: CoerceFunc, localName: string) {\n    super(coerceFunc, 'null', '', localName, false);\n  }\n\n  encode(value: any): Uint8Array {\n    const result = arrayify([]) || new Uint8Array();\n    return result;\n  }\n\n  decode(data: Uint8Array, offset: number): DecodedResult {\n    if (offset > data.length) {\n      throw new Error('invalid null');\n    }\n    return {\n      consumed: 0,\n      value: this.coerceFunc('null', undefined),\n    };\n  }\n}\n\n// tslint:disable-next-line: max-classes-per-file\n/** @hidden */\nclass CoderNumber extends Coder {\n  readonly size: number;\n  readonly signed: boolean;\n  constructor(coerceFunc: CoerceFunc, size: number, signed: boolean, localName: string) {\n    const name = (signed ? 'int' : 'uint') + size * 8;\n    super(coerceFunc, name, name, localName, false);\n\n    this.size = size;\n    this.signed = signed;\n  }\n\n  encode(value: BN | number | string): Uint8Array {\n    let result;\n    try {\n      let v = new BN(value);\n      if (this.signed) {\n        let bounds = MaxUint256.maskn(this.size * 8 - 1);\n        if (v.gt(bounds)) {\n          throw new Error('out-of-bounds');\n        }\n        bounds = bounds.add(One).mul(NegativeOne);\n        if (v.lt(bounds)) {\n          throw new Error('out-of-bounds');\n        }\n      } else if (v.lt(Zero) || v.gt(MaxUint256.maskn(this.size * 8))) {\n        throw new Error('out-of-bounds');\n      }\n\n      v = v.toTwos(this.size * 8).maskn(this.size * 8);\n      if (this.signed) {\n        v = v.fromTwos(this.size * 8).toTwos(256);\n      }\n      const vString = v.toString('hex');\n\n      result = padZeros(arrayify(`0x${vString}`) || new Uint8Array(), 32);\n    } catch (error) {\n      throwError('invalid number value', INVALID_ARGUMENT, {\n        arg: this.localName,\n        coderType: this.name,\n        value,\n      });\n    }\n    return result || padZeros(new Uint8Array(), 32);\n  }\n\n  decode(data: Uint8Array, offset: number): DecodedResult {\n    if (data.length < offset + 32) {\n      throwError('insufficient data for ' + this.name + ' type', INVALID_ARGUMENT, {\n        arg: this.localName,\n        coderType: this.name,\n        value: hexlify(data.slice(offset, offset + 32)),\n      });\n    }\n    const junkLength = 32 - this.size;\n    const dataValue = hexlify(data.slice(offset + junkLength, offset + 32));\n\n    let value = hexToBN(dataValue);\n    // tslint:disable-next-line: prefer-conditional-expression\n    if (this.signed) {\n      value = value.fromTwos(this.size * 8);\n    } else {\n      value = value.maskn(this.size * 8);\n    }\n\n    return {\n      consumed: 32,\n      value: this.coerceFunc(this.name, value),\n    };\n  }\n}\n\n/** @hidden */\nconst uint256Coder = new CoderNumber(\n  (type: string, value: any) => {\n    return value;\n  },\n  32,\n  false,\n  'none',\n);\n\n// tslint:disable-next-line: max-classes-per-file\n/** @hidden */\nclass CoderBoolean extends Coder {\n  constructor(coerceFunc: CoerceFunc, localName: string) {\n    super(coerceFunc, 'bool', 'bool', localName, false);\n  }\n\n  encode(value: boolean): Uint8Array {\n    return uint256Coder.encode(!!value ? new BN(1) : new BN(0));\n  }\n\n  decode(data: Uint8Array, offset: number): DecodedResult {\n    let result;\n    try {\n      result = uint256Coder.decode(data, offset);\n    } catch (error) {\n      if (error.reason === 'insufficient data for uint256 type') {\n        throwError('insufficient data for boolean type', INVALID_ARGUMENT, {\n          arg: this.localName,\n          coderType: 'boolean',\n          value: error.value,\n        });\n      }\n      throw error;\n    }\n    return {\n      consumed: result.consumed,\n      value: this.coerceFunc('bool', !result.value.isZero()),\n    };\n  }\n}\n\n// tslint:disable-next-line: max-classes-per-file\n/** @hidden */\nclass CoderFixedBytes extends Coder {\n  readonly length: number;\n  constructor(coerceFunc: CoerceFunc, length: number, localName: string) {\n    const name = 'bytes' + length;\n    super(coerceFunc, name, name, localName, false);\n    this.length = length;\n  }\n\n  encode(value: Arrayish): Uint8Array {\n    const result = new Uint8Array(this.length);\n\n    try {\n      const arrayied = arrayify(value);\n      let data = null;\n      if (arrayied !== null) {\n        const valueToByte = hexlify(arrayied);\n        data = arrayify(bytesPadRight(valueToByte, this.length));\n      } else {\n        throw new Error('cannot arraify data');\n      }\n\n      if (data === null || data.length !== this.length) {\n        throw new Error('incorrect data length');\n      }\n      result.set(data);\n    } catch (error) {\n      throwError('invalid ' + this.name + ' value', INVALID_ARGUMENT, {\n        arg: this.localName,\n        coderType: this.name,\n        value: error.value || value,\n      });\n    }\n    return result;\n  }\n\n  decode(data: Uint8Array, offset: number): DecodedResult {\n    if (data.length < offset + 32) {\n      throwError('insufficient data for ' + name + ' type', INVALID_ARGUMENT, {\n        arg: this.localName,\n        coderType: this.name,\n        value: hexlify(data.slice(offset, offset + 32)),\n      });\n    }\n\n    return {\n      consumed: 32,\n      value: this.coerceFunc(this.name, hexlify(data.slice(offset, offset + this.length))),\n    };\n  }\n}\n\n// tslint:disable-next-line: max-classes-per-file\n/** @hidden */\nclass CoderAddress extends Coder {\n  constructor(coerceFunc: CoerceFunc, localName: string) {\n    super(coerceFunc, 'address', 'address', localName, false);\n  }\n  encode(value: string): Uint8Array {\n    const result = new Uint8Array(32);\n    try {\n      const addr = arrayify(toChecksumAddress(value)) || new Uint8Array();\n      result.set(addr, 12);\n    } catch (error) {\n      throwError('invalid address', INVALID_ARGUMENT, {\n        arg: this.localName,\n        coderType: 'address',\n        value,\n      });\n    }\n    return result;\n  }\n  decode(data: Uint8Array, offset: number): DecodedResult {\n    if (data.length < offset + 32) {\n      throwError('insufficuent data for address type', INVALID_ARGUMENT, {\n        arg: this.localName,\n        coderType: 'address',\n        value: hexlify(data.slice(offset, offset + 32)),\n      });\n    }\n    return {\n      consumed: 32,\n      value: this.coerceFunc(\n        'address',\n        toChecksumAddress(hexlify(data.slice(offset + 12, offset + 32))),\n      ),\n    };\n  }\n}\n\n/** @hidden */\nfunction _encodeDynamicBytes(value: Uint8Array): Uint8Array {\n  const dataLength = 32 * Math.ceil(value.length / 32);\n  const padding = new Uint8Array(dataLength - value.length);\n\n  return concat([uint256Coder.encode(new BN(value.length)), value, padding]);\n}\n\n/** @hidden */\nfunction _decodeDynamicBytes(data: Uint8Array, offset: number, localName: string): DecodedResult {\n  if (data.length < offset + 32) {\n    throwError('insufficient data for dynamicBytes length', INVALID_ARGUMENT, {\n      arg: localName,\n      coderType: 'dynamicBytes',\n      value: hexlify(data.slice(offset, offset + 32)),\n    });\n  }\n\n  let length = uint256Coder.decode(data, offset).value;\n\n  try {\n    length = length.toNumber();\n  } catch (error) {\n    throwError('dynamic bytes count too large', INVALID_ARGUMENT, {\n      arg: localName,\n      coderType: 'dynamicBytes',\n      value: length.toString(),\n    });\n  }\n\n  if (data.length < offset + 32 + length) {\n    throwError('insufficient data for dynamicBytes type', INVALID_ARGUMENT, {\n      arg: localName,\n      coderType: 'dynamicBytes',\n      value: hexlify(data.slice(offset, offset + 32 + length)),\n    });\n  }\n\n  return {\n    consumed: 32 + 32 * Math.ceil(length / 32),\n    value: data.slice(offset + 32, offset + 32 + length),\n  };\n}\n\n// tslint:disable-next-line: max-classes-per-file\n/** @hidden */\nclass CoderDynamicBytes extends Coder {\n  constructor(coerceFunc: CoerceFunc, localName: string) {\n    super(coerceFunc, 'bytes', 'bytes', localName, true);\n  }\n  encode(value: Arrayish): Uint8Array {\n    let result = new Uint8Array();\n    try {\n      result = _encodeDynamicBytes(arrayify(value) || new Uint8Array());\n    } catch (error) {\n      throwError('invalid bytes value', INVALID_ARGUMENT, {\n        arg: this.localName,\n        coderType: 'bytes',\n        value: error.value,\n      });\n    }\n    return result;\n  }\n\n  decode(data: Uint8Array, offset: number): DecodedResult {\n    const result = _decodeDynamicBytes(data, offset, this.localName || '');\n    result.value = this.coerceFunc('bytes', hexlify(result.value));\n    return result;\n  }\n}\n\n// tslint:disable-next-line: max-classes-per-file\n/** @hidden */\nclass CoderString extends Coder {\n  constructor(coerceFunc: CoerceFunc, localName: string) {\n    super(coerceFunc, 'string', 'string', localName, true);\n  }\n\n  encode(value: string): Uint8Array {\n    if (typeof value !== 'string') {\n      throwError('invalid string value', INVALID_ARGUMENT, {\n        arg: this.localName,\n        coderType: 'string',\n        value,\n      });\n    }\n    return _encodeDynamicBytes(toUtf8Bytes(value));\n  }\n\n  decode(data: Uint8Array, offset: number): DecodedResult {\n    const result = _decodeDynamicBytes(data, offset, this.localName || '');\n    result.value = this.coerceFunc('string', toUtf8String(result.value));\n    return result;\n  }\n}\n\n/** @hidden */\nfunction alignSize(size: number): number {\n  return 32 * Math.ceil(size / 32);\n}\n\n/** @hidden */\nfunction pack(coders: Coder[], values: any[]): Uint8Array {\n  if (Array.isArray(values)) {\n    // do nothing\n  } else if (values && typeof values === 'object') {\n    const arrayValues: any[] = [];\n    coders.forEach((coder) => {\n      arrayValues.push((<any>values)[coder.localName || '']);\n    });\n    values = arrayValues;\n  } else {\n    throwError('invalid tuple value', INVALID_ARGUMENT, {\n      coderType: 'tuple',\n      value: values,\n    });\n  }\n\n  if (coders.length !== values.length) {\n    throwError('types/value length mismatch', INVALID_ARGUMENT, {\n      coderType: 'tuple',\n      value: values,\n    });\n  }\n\n  const parts: Array<{ dynamic: boolean; value: any }> = [];\n\n  coders.forEach((coder, index) => {\n    parts.push({ dynamic: coder.dynamic, value: coder.encode(values[index]) });\n  });\n\n  let staticSize = 0;\n  let dynamicSize = 0;\n  parts.forEach((part) => {\n    if (part.dynamic) {\n      staticSize += 32;\n      dynamicSize += alignSize(part.value.length);\n    } else {\n      staticSize += alignSize(part.value.length);\n      // todo : is it to be static size not alignSize?\n    }\n  });\n\n  let offset = 0;\n  let dynamicOffset = staticSize;\n  const data = new Uint8Array(staticSize + dynamicSize);\n\n  parts.forEach((part) => {\n    if (part.dynamic) {\n      // uint256Coder.encode(dynamicOffset).copy(data, offset);\n      data.set(uint256Coder.encode(new BN(dynamicOffset)), offset);\n      offset += 32;\n\n      // part.value.copy(data, dynamicOffset);  @TODO\n      data.set(part.value, dynamicOffset);\n      dynamicOffset += alignSize(part.value.length);\n    } else {\n      // part.value.copy(data, offset);  @TODO\n      data.set(part.value, offset);\n      offset += alignSize(part.value.length);\n    }\n  });\n\n  return data;\n}\n\n/** @hidden */\nfunction unpack(coders: Coder[], data: Uint8Array, offset: number): DecodedResult {\n  const baseOffset = offset;\n  let consumed = 0;\n  const value: any = [];\n  coders.forEach((coder) => {\n    let result: DecodedResult;\n    if (coder.dynamic) {\n      const dynamicOffset = uint256Coder.decode(data, offset);\n      result = coder.decode(data, baseOffset + dynamicOffset.value.toNumber());\n      // The dynamic part is leap-frogged somewhere else; doesn't count towards size\n      result.consumed = dynamicOffset.consumed;\n    } else {\n      result = coder.decode(data, offset);\n    }\n\n    if (result.value !== undefined) {\n      value.push(result.value);\n    }\n\n    offset += result.consumed;\n    consumed += result.consumed;\n  });\n\n  coders.forEach((coder: Coder, index: number) => {\n    let name: string | undefined = coder.localName;\n    if (!name) {\n      return;\n    }\n\n    if (name === 'length') {\n      name = '_length';\n    }\n\n    if (value[name] != null) {\n      return;\n    }\n\n    value[name] = value[index];\n  });\n\n  return {\n    value,\n    consumed,\n  };\n}\n\n// tslint:disable-next-line: max-classes-per-file\n/** @hidden */\nclass CoderArray extends Coder {\n  readonly coder: Coder;\n  readonly length: number;\n  constructor(coerceFunc: CoerceFunc, coder: Coder, length: number, localName: string) {\n    const type = coder.type + '[' + (length >= 0 ? length : '') + ']';\n    const dynamic = length === -1 || coder.dynamic;\n    super(coerceFunc, 'array', type, localName, dynamic);\n\n    this.coder = coder;\n    this.length = length;\n  }\n\n  encode(value: any[]): Uint8Array {\n    if (!Array.isArray(value)) {\n      throwError('expected array value', INVALID_ARGUMENT, {\n        arg: this.localName,\n        coderType: 'array',\n        value,\n      });\n    }\n\n    let count = this.length;\n\n    let result = new Uint8Array(0);\n    if (count === -1) {\n      count = value.length;\n      result = uint256Coder.encode(new BN(count));\n    }\n\n    checkArgumentCount(\n      count,\n      value.length,\n      ' in coder array' + (this.localName ? ' ' + this.localName : ''),\n    );\n\n    const coders = [];\n    // tslint:disable-next-line: prefer-for-of\n    for (let i = 0; i < value.length; i++) {\n      coders.push(this.coder);\n    }\n\n    return concat([result, pack(coders, value)]);\n  }\n\n  decode(data: Uint8Array, offset: number) {\n    // @TODO:\n    // if (data.length < offset + length * 32) { throw new Error('invalid array'); }\n\n    let consumed = 0;\n\n    let count = this.length;\n\n    let decodedLength: DecodedResult = { consumed: 0, value: undefined };\n    if (count === -1) {\n      try {\n        decodedLength = uint256Coder.decode(data, offset);\n      } catch (error) {\n        throwError('insufficient data for dynamic array length', INVALID_ARGUMENT, {\n          arg: this.localName,\n          coderType: 'array',\n          value: error.value,\n        });\n      }\n      try {\n        count = decodedLength.value.toNumber();\n      } catch (error) {\n        throwError('array count too large', INVALID_ARGUMENT, {\n          arg: this.localName,\n          coderType: 'array',\n          value: decodedLength.value.toString(),\n        });\n      }\n      consumed += decodedLength.consumed;\n      offset += decodedLength.consumed;\n    }\n\n    const coders = [];\n    for (let i = 0; i < count; i++) {\n      coders.push(new CoderAnonymous(this.coder));\n    }\n\n    const result = unpack(coders, data, offset);\n    result.consumed += consumed;\n    result.value = this.coerceFunc(this.type, result.value);\n    return result;\n  }\n}\n\n// tslint:disable-next-line: max-classes-per-file\n/** @hidden */\nclass CoderTuple extends Coder {\n  readonly coders: Coder[];\n  constructor(coerceFunc: CoerceFunc, coders: Coder[], localName: string) {\n    let dynamic = false;\n    const types: string[] = [];\n    coders.forEach((coder) => {\n      if (coder.dynamic) {\n        dynamic = true;\n      }\n      types.push(coder.type);\n    });\n    const type = 'tuple(' + types.join(',') + ')';\n\n    super(coerceFunc, 'tuple', type, localName, dynamic);\n    this.coders = coders;\n  }\n\n  encode(value: any[]): Uint8Array {\n    return pack(this.coders, value);\n  }\n\n  decode(data: Uint8Array, offset: number): DecodedResult {\n    const result = unpack(this.coders, data, offset);\n    result.value = this.coerceFunc(this.type, result.value);\n\n    return result;\n  }\n}\n\n/** @hidden */\nfunction splitNesting(value: string): any[] {\n  value = value.trim();\n\n  const result = [];\n  let accum = '';\n  let depth = 0;\n\n  // tslint:disable-next-line: prefer-for-of\n  for (let offset = 0; offset < value.length; offset++) {\n    const c = value[offset];\n    if (c === ',' && depth === 0) {\n      result.push(accum);\n      accum = '';\n    } else {\n      accum += c;\n      if (c === '(') {\n        depth++;\n      } else if (c === ')') {\n        depth--;\n        if (depth === -1) {\n          throw new Error('unbalanced parenthsis');\n        }\n      }\n    }\n  }\n  if (accum) {\n    result.push(accum);\n  }\n\n  return result;\n}\n\n// @TODO: Is there a way to return \"class\"?\n/** @hidden */\nconst paramTypeSimple: { [key: string]: any } = {\n  address: CoderAddress,\n  bool: CoderBoolean,\n  string: CoderString,\n  bytes: CoderDynamicBytes,\n};\n\n/** @hidden */\nfunction getTupleParamCoder(\n  coerceFunc: CoerceFunc,\n  components: any[],\n  localName: string,\n): CoderTuple {\n  if (!components) {\n    components = [];\n  }\n  const coders: Coder[] = [];\n  components.forEach((component) => {\n    coders.push(getParamCoder(coerceFunc, component));\n  });\n\n  return new CoderTuple(coerceFunc, coders, localName);\n}\n\n/** @hidden */\nfunction getParamCoder(coerceFunc: CoerceFunc, param: ParamType | any): any {\n  const coder = paramTypeSimple[param.type];\n  if (coder) {\n    return new coder(coerceFunc, param.name);\n  }\n  const matcher = param.type.match(paramTypeNumber);\n  if (matcher) {\n    const size = parseInt(matcher[2] || '256', 10);\n    if (size === 0 || size > 256 || size % 8 !== 0) {\n      throwError('invalid ' + matcher[1] + ' bit length', INVALID_ARGUMENT, {\n        arg: 'param',\n        value: param,\n      });\n    }\n    return new CoderNumber(coerceFunc, size / 8, matcher[1] === 'int', param.name || '');\n  }\n\n  const matcher2 = param.type.match(paramTypeBytes);\n  if (matcher2) {\n    const size = parseInt(matcher2[1], 10);\n    if (size === 0 || size > 32) {\n      throwError('invalid bytes length', INVALID_ARGUMENT, {\n        arg: 'param',\n        value: param,\n      });\n    }\n    return new CoderFixedBytes(coerceFunc, size, param.name || '');\n  }\n\n  const matcher3 = param.type.match(paramTypeArray);\n  if (matcher3) {\n    const size = parseInt(matcher3[2] || '-1', 10);\n    param = shallowCopy(param);\n    param.type = matcher3[1];\n    param = deepCopy(param);\n    return new CoderArray(coerceFunc, getParamCoder(coerceFunc, param), size, param.name || '');\n  }\n\n  if (param.type.substring(0, 5) === 'tuple') {\n    return getTupleParamCoder(coerceFunc, param.components || [], param.name || '');\n  }\n\n  if (param.type === '') {\n    return new CoderNull(coerceFunc, param.name || '');\n  }\n\n  throwError('invalid type', INVALID_ARGUMENT, {\n    arg: 'type',\n    value: param.type,\n  });\n}\n\n/** @hidden */\nexport enum UnicodeNormalizationForm {\n  current = '',\n  NFC = 'NFC',\n  NFD = 'NFD',\n  NFKC = 'NFKC',\n  NFKD = 'NFKD',\n}\n\n/** @hidden */\nexport function toUtf8Bytes(\n  str: string,\n  form: UnicodeNormalizationForm = UnicodeNormalizationForm.current,\n): Uint8Array {\n  if (form !== UnicodeNormalizationForm.current) {\n    checkNormalize();\n    str = str.normalize(form);\n  }\n\n  const result = [];\n  for (let i = 0; i < str.length; i++) {\n    let c = str.charCodeAt(i);\n\n    if (c < 0x80) {\n      result.push(c);\n    } else if (c < 0x800) {\n      result.push((c >> 6) | 0xc0);\n      result.push((c & 0x3f) | 0x80);\n    } else if ((c & 0xfc00) === 0xd800) {\n      i++;\n      const c2 = str.charCodeAt(i);\n\n      if (i >= str.length || (c2 & 0xfc00) !== 0xdc00) {\n        throw new Error('invalid utf-8 string');\n      }\n\n      // Surrogate Pair\n      c = 0x10000 + ((c & 0x03ff) << 10) + (c2 & 0x03ff);\n      result.push((c >> 18) | 0xf0);\n      result.push(((c >> 12) & 0x3f) | 0x80);\n      result.push(((c >> 6) & 0x3f) | 0x80);\n      result.push((c & 0x3f) | 0x80);\n    } else {\n      result.push((c >> 12) | 0xe0);\n      result.push(((c >> 6) & 0x3f) | 0x80);\n      result.push((c & 0x3f) | 0x80);\n    }\n  }\n\n  return arrayify(result) || new Uint8Array();\n}\n\n// http://stackoverflow.com/questions/13356493/decode-utf-8-with-javascript#13691499\n/** @hidden */\nexport function toUtf8String(bytes: Arrayish, ignoreErrors?: boolean): string {\n  bytes = arrayify(bytes) || new Uint8Array();\n\n  let result = '';\n  let i = 0;\n\n  // Invalid bytes are ignored\n  while (i < bytes.length) {\n    const c = bytes[i++];\n    // 0xxx xxxx\n    if (c >> 7 === 0) {\n      result += String.fromCharCode(c);\n      continue;\n    }\n\n    // Multibyte; how many bytes left for this character?\n    let extraLength = null;\n    let overlongMask = null;\n\n    // 110x xxxx 10xx xxxx\n    if ((c & 0xe0) === 0xc0) {\n      extraLength = 1;\n      overlongMask = 0x7f;\n\n      // 1110 xxxx 10xx xxxx 10xx xxxx\n    } else if ((c & 0xf0) === 0xe0) {\n      extraLength = 2;\n      overlongMask = 0x7ff;\n\n      // 1111 0xxx 10xx xxxx 10xx xxxx 10xx xxxx\n    } else if ((c & 0xf8) === 0xf0) {\n      extraLength = 3;\n      overlongMask = 0xffff;\n    } else {\n      if (!ignoreErrors) {\n        if ((c & 0xc0) === 0x80) {\n          throw new Error('invalid utf8 byte sequence; unexpected continuation byte');\n        }\n        throw new Error('invalid utf8 byte sequence; invalid prefix');\n      }\n      continue;\n    }\n\n    // Do we have enough bytes in our data?\n    if (i + extraLength > bytes.length) {\n      if (!ignoreErrors) {\n        throw new Error('invalid utf8 byte sequence; too short');\n      }\n\n      // If there is an invalid unprocessed byte, skip continuation bytes\n      for (; i < bytes.length; i++) {\n        if (bytes[i] >> 6 !== 0x02) {\n          break;\n        }\n      }\n\n      continue;\n    }\n\n    // Remove the length prefix from the char\n    let res: number | null = c & ((1 << (8 - extraLength - 1)) - 1);\n\n    for (let j = 0; j < extraLength; j++) {\n      const nextChar = bytes[i];\n\n      // Invalid continuation byte\n      if ((nextChar & 0xc0) !== 0x80) {\n        res = null;\n        break;\n      }\n\n      res = (res << 6) | (nextChar & 0x3f);\n      i++;\n    }\n\n    if (res === null) {\n      if (!ignoreErrors) {\n        throw new Error('invalid utf8 byte sequence; invalid continuation byte');\n      }\n      continue;\n    }\n\n    // Check for overlong seuences (more bytes than needed)\n    if (res <= overlongMask) {\n      if (!ignoreErrors) {\n        throw new Error('invalid utf8 byte sequence; overlong');\n      }\n      continue;\n    }\n\n    // Maximum code point\n    if (res > 0x10ffff) {\n      if (!ignoreErrors) {\n        throw new Error('invalid utf8 byte sequence; out-of-range');\n      }\n      continue;\n    }\n\n    // Reserved for UTF-16 surrogate halves\n    if (res >= 0xd800 && res <= 0xdfff) {\n      if (!ignoreErrors) {\n        throw new Error('invalid utf8 byte sequence; utf-16 surrogate');\n      }\n      continue;\n    }\n\n    if (res <= 0xffff) {\n      result += String.fromCharCode(res);\n      continue;\n    }\n\n    res -= 0x10000;\n    result += String.fromCharCode(((res >> 10) & 0x3ff) + 0xd800, (res & 0x3ff) + 0xdc00);\n  }\n\n  return result;\n}\n\n/** @hidden */\nexport function formatBytes32String(text: string): string {\n  // Get the bytes\n  const bytes = toUtf8Bytes(text);\n\n  // Check we have room for null-termination\n  if (bytes.length > 31) {\n    throw new Error('bytes32 string must be less than 32 bytes');\n  }\n\n  // Zero-pad (implicitly null-terminates)\n  return hexlify(concat([bytes, HashZero]).slice(0, 32));\n}\n\n/** @hidden */\nexport function parseBytes32String(bytes: Arrayish): string {\n  const data = arrayify(bytes) || new Uint8Array();\n\n  // Must be 32 bytes with a null-termination\n  if (data.length !== 32) {\n    throw new Error('invalid bytes32 - not 32 bytes long');\n  }\n  if (data[31] !== 0) {\n    throw new Error('invalid bytes32 sdtring - no null terminator');\n  }\n\n  // Find the null termination\n  let length = 31;\n  while (data[length - 1] === 0) {\n    length--;\n  }\n\n  // Determine the string value\n  return toUtf8String(data.slice(0, length));\n}\n\n/** @hidden */\nexport function isType(object: any, type: string): boolean {\n  return object && object._ethersType === type;\n}\n\n/** @hidden */\nexport function shallowCopy(object: any): any {\n  const result: any = {};\n  // tslint:disable-next-line: forin\n  for (const key in object) {\n    result[key] = object[key];\n  }\n  return result;\n}\n\n/** @hidden */\nconst opaque: { [key: string]: boolean } = {\n  boolean: true,\n  number: true,\n  string: true,\n};\n\n/** @hidden */\nexport function deepCopy(object: any, frozen?: boolean): any {\n  // Opaque objects are not mutable, so safe to copy by assignment\n  if (object === undefined || object === null || opaque[typeof object]) {\n    return object;\n  }\n\n  // Arrays are mutable, so we need to create a copy\n  if (Array.isArray(object)) {\n    const result = object.map((item) => deepCopy(item, frozen));\n    if (frozen) {\n      Object.freeze(result);\n    }\n    return result;\n  }\n\n  if (typeof object === 'object') {\n    // Some internal objects, which are already immutable\n    if (isType(object, 'BigNumber')) {\n      return object;\n    }\n    if (isType(object, 'Description')) {\n      return object;\n    }\n    if (isType(object, 'Indexed')) {\n      return object;\n    }\n\n    const result: { [key: string]: any } = {};\n    // tslint:disable-next-line: forin\n    for (const key in object) {\n      const value = object[key];\n      if (value === undefined) {\n        continue;\n      }\n      defineReadOnly(result, key, deepCopy(value, frozen));\n    }\n\n    if (frozen) {\n      Object.freeze(result);\n    }\n\n    return result;\n  }\n\n  // The function type is also immutable, so safe to copy by assignment\n  if (typeof object === 'function') {\n    return object;\n  }\n\n  throw new Error('Cannot deepCopy ' + typeof object);\n}\n\n// tslint:disable-next-line: max-classes-per-file\n/** @hidden */\nexport class AbiCoder {\n  coerceFunc: CoerceFunc;\n  constructor(coerceFunc?: CoerceFunc) {\n    checkNew(this, AbiCoder);\n\n    if (!coerceFunc) {\n      coerceFunc = defaultCoerceFunc;\n    }\n    this.coerceFunc = coerceFunc;\n  }\n\n  encode(types: Array<string | ParamType>, values: any[]): string {\n    if (types.length !== values.length) {\n      throwError('types/values length mismatch', INVALID_ARGUMENT, {\n        count: { types: types.length, values: values.length },\n        value: { types, values },\n      });\n    }\n\n    const coders: Coder[] = [];\n    types.forEach((type) => {\n      // Convert types to type objects\n      //   - \"uint foo\" => { type: \"uint\", name: \"foo\" }\n      //   - \"tuple(uint, uint)\" => { type: \"tuple\", components: [ { type: \"uint\" }, { type: \"uint\" }, ] }\n\n      let typeObject: ParamType | null = null;\n      // tslint:disable-next-line: prefer-conditional-expression\n      if (typeof type === 'string') {\n        typeObject = parseParam(type);\n      } else {\n        typeObject = type;\n      }\n\n      coders.push(getParamCoder(this.coerceFunc, typeObject));\n    }, this);\n    const encodedArray = new CoderTuple(this.coerceFunc, coders, '_').encode(values);\n    return hexlify(encodedArray);\n  }\n\n  decode(types: Array<string | ParamType>, data: Arrayish): any {\n    const coders: Coder[] = [];\n    types.forEach((type) => {\n      // See encode for details\n      let typeObject: ParamType | null = null;\n      // tslint:disable-next-line: prefer-conditional-expression\n      if (typeof type === 'string') {\n        typeObject = parseParam(type);\n      } else {\n        typeObject = deepCopy(type);\n      }\n\n      coders.push(getParamCoder(this.coerceFunc, typeObject));\n    }, this);\n    const result = new CoderTuple(this.coerceFunc, coders, '_').decode(\n      arrayify(data) || new Uint8Array(),\n      0,\n    ).value;\n    return result;\n  }\n}\n\n/** @hidden */\nexport const defaultAbiCoder: AbiCoder = new AbiCoder();\n","/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\n\nimport { isObject, isArray } from '@harmony-js/utils';\nimport { BN } from '@harmony-js/crypto';\n\nexport const jsonInterfaceMethodToString = (json: any): string => {\n  if (isObject(json) && json.name && json.name.includes('(')) {\n    return json.name;\n  }\n\n  return `${json.name}(${flattenTypes(false, json.inputs).join(',')})`;\n};\n\nexport const flattenTypes = (includeTuple: any, puts: any[]) => {\n  // console.log(\"entered _flattenTypes. inputs/outputs: \" + puts)\n  const types: any[] = [];\n\n  puts.forEach((param: any) => {\n    if (typeof param.components === 'object') {\n      if (param.type.substring(0, 5) !== 'tuple') {\n        throw new Error('components found but type is not tuple; report on GitHub');\n      }\n      let suffix = '';\n      const arrayBracket = param.type.indexOf('[');\n      if (arrayBracket >= 0) {\n        suffix = param.type.substring(arrayBracket);\n      }\n      const result = flattenTypes(includeTuple, param.components);\n      // console.log(\"result should have things: \" + result)\n      if (isArray(result) && includeTuple) {\n        // console.log(\"include tuple word, and its an array. joining...: \" + result.types)\n        types.push(`tuple(${result.join(',')})${suffix}`);\n      } else if (!includeTuple) {\n        // console.log(\"don't include tuple, but its an array. joining...: \" + result)\n        types.push(`(${result.join(',')})${suffix}`);\n      } else {\n        // console.log(\"its a single type within a tuple: \" + result.types)\n        types.push(`(${result})`);\n      }\n    } else {\n      // console.log(\"its a type and not directly in a tuple: \" + param.type)\n      types.push(param.type);\n    }\n  });\n\n  return types;\n};\n\nexport function bnToString(result: any): string | any {\n  if (BN.isBN(result)) {\n    return result.toString();\n  } else {\n    return result;\n  }\n}\n","/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\n\nimport { AbiCoder as ABICoder, ParamType, toUtf8Bytes } from './abiCoder';\nimport { isObject, isArray } from '@harmony-js/utils';\nimport { keccak256, Arrayish } from '@harmony-js/crypto';\nimport { jsonInterfaceMethodToString, bnToString } from './utils';\n\nexport class AbiCoderClass {\n  coder: ABICoder;\n  constructor(coder: ABICoder) {\n    this.coder = coder;\n  }\n  encodeFunctionSignature(functionName: any) {\n    if (isObject(functionName)) {\n      functionName = jsonInterfaceMethodToString(functionName);\n    }\n    const result = keccak256(toUtf8Bytes(functionName));\n    return result.slice(0, 10);\n  }\n  encodeEventSignature(functionName: any) {\n    if (isObject(functionName)) {\n      functionName = jsonInterfaceMethodToString(functionName);\n    }\n    const result = keccak256(toUtf8Bytes(functionName));\n    return result;\n  }\n  encodeParameter(types: string | ParamType, param: any) {\n    return this.encodeParameters([types], [param]);\n  }\n  encodeParameters(types: Array<string | ParamType>, params: any[]) {\n    return this.coder.encode(types, params);\n  }\n  encodeFunctionCall(jsonInterface: any, params: any[]) {\n    return (\n      this.encodeFunctionSignature(jsonInterface) +\n      this.encodeParameters(jsonInterface.inputs, params).replace('0x', '')\n    );\n  }\n  decodeParameter(type: ParamType, bytes: Arrayish) {\n    return this.decodeParameters([type], bytes)[0];\n  }\n  decodeParameters(outputs: ParamType[], bytes: Arrayish) {\n    if (isArray(outputs) && outputs.length === 0) {\n      throw new Error('Empty outputs array given!');\n    }\n\n    if (!bytes || bytes === '0x' || bytes === '0X') {\n      throw new Error(`Invalid bytes string given: ${bytes}`);\n    }\n\n    const result = this.coder.decode(outputs, bytes);\n\n    const returnValues: any = {};\n    let decodedValue;\n\n    if (isArray(result)) {\n      if (outputs.length > 1) {\n        outputs.forEach((output: any, i) => {\n          decodedValue = result[i];\n\n          if (decodedValue === '0x') {\n            decodedValue = null;\n          }\n\n          returnValues[i] = bnToString(decodedValue);\n\n          if (isObject(output) && output.name) {\n            returnValues[output.name] = bnToString(decodedValue);\n          }\n        });\n\n        return returnValues;\n      }\n\n      return bnToString(result);\n    }\n\n    if (isObject(outputs[0]) && outputs[0].name) {\n      returnValues[outputs[0].name] = bnToString(result);\n    }\n\n    returnValues[0] = bnToString(result);\n\n    return returnValues;\n  }\n\n  decodeLog(inputs: any, data = '', topics: any) {\n    const returnValues: any = {};\n    let topicCount = 0;\n    let value;\n    const nonIndexedInputKeys: any[] = [];\n    const nonIndexedInputItems: any[] = [];\n\n    if (!isArray(topics)) {\n      topics = [topics];\n    }\n\n    inputs.forEach((input: any, i: number) => {\n      if (input.indexed) {\n        if (input.type === 'string') {\n          return;\n        }\n\n        value = topics[topicCount];\n\n        if (this.isStaticType(input.type)) {\n          value = this.decodeParameter(input.type, topics[topicCount]);\n        }\n\n        returnValues[i] = bnToString(value);\n        returnValues[input.name] = bnToString(value);\n        topicCount++;\n\n        return;\n      }\n\n      nonIndexedInputKeys.push(i);\n      nonIndexedInputItems.push(input);\n    });\n\n    if (data) {\n      const values = this.decodeParameters(nonIndexedInputItems, data);\n\n      let decodedValue;\n      nonIndexedInputKeys.forEach((itemKey, index) => {\n        decodedValue = values[index];\n\n        returnValues[itemKey] = bnToString(decodedValue);\n        returnValues[nonIndexedInputItems[index].name] = bnToString(decodedValue);\n      });\n    }\n\n    return returnValues;\n  }\n  isStaticType(type: any) {\n    if (type === 'bytes') {\n      return false;\n    }\n\n    if (type === 'string') {\n      return false;\n    }\n\n    if (type.indexOf('[') && type.slice(type.indexOf('[')).length === 2) {\n      return false;\n    }\n\n    return true;\n  }\n}\n","/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\n\nimport { AbiCoderClass } from './api';\nimport { AbiCoder as EtherCoder } from './abiCoder';\n\nexport function AbiCoder() {\n  return new AbiCoderClass(new EtherCoder());\n}\n","/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\n\nimport { isArray } from '@harmony-js/utils';\nimport { AbiItemModel, AbiOutput, AbiInput } from './types';\n\nexport class AbiItem {\n  abiItem: AbiItemModel;\n  signature: string;\n  name: string;\n  payable: boolean;\n  anonymous: boolean;\n  type?: string;\n  inputs?: AbiInput[];\n  outputs?: AbiOutput[];\n  contractMethodParameters: any[];\n\n  // constructor\n  constructor(abiItem: AbiItemModel | any) {\n    this.abiItem = abiItem;\n    this.signature = this.abiItem.signature;\n    this.name = this.abiItem.name;\n    this.payable = this.abiItem.payable;\n    this.anonymous = this.abiItem.anonymous;\n    this.type = this.abiItem.type;\n    this.inputs = this.abiItem.inputs;\n    this.outputs = this.abiItem.outputs;\n    this.contractMethodParameters = [];\n  }\n\n  getInputLength() {\n    if (isArray(this.abiItem.inputs)) {\n      return this.abiItem.inputs.length;\n    }\n\n    return 0;\n  }\n\n  getInputs() {\n    if (isArray(this.abiItem.inputs)) {\n      return this.abiItem.inputs;\n    }\n\n    return [];\n  }\n\n  getOutputs() {\n    if (isArray(this.abiItem.outputs)) {\n      return this.abiItem.outputs;\n    }\n\n    return [];\n  }\n\n  getIndexedInputs() {\n    return this.getInputs().filter((input) => {\n      return input.indexed === true;\n    });\n  }\n\n  isOfType(type: string) {\n    return this.abiItem.type === type;\n  }\n}\n","/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\n\nimport { AbiItemModel } from './types';\n\nexport class AbiModel {\n  abi: any;\n\n  constructor(mappedAbi: any) {\n    this.abi = mappedAbi;\n  }\n\n  getMethod(name: string): AbiItemModel | false {\n    if (this.hasMethod(name)) {\n      return this.abi.methods[name];\n    }\n\n    return false;\n  }\n\n  getMethods(): AbiItemModel[] {\n    return this.abi.methods;\n  }\n\n  getEvent(name: string): AbiItemModel | false {\n    if (this.hasEvent(name)) {\n      return this.abi.events[name];\n    }\n\n    return false;\n  }\n\n  getEvents(): AbiItemModel[] {\n    return this.abi.events;\n  }\n\n  getEventBySignature(signature: string): AbiItemModel | undefined {\n    let event;\n\n    Object.keys(this.abi.events).forEach((key) => {\n      if (this.abi.events[key].signature === signature) {\n        event = this.abi.events[key];\n      }\n    });\n\n    return event;\n  }\n\n  hasMethod(name: string): boolean {\n    return typeof this.abi.methods[name] !== 'undefined';\n  }\n\n  hasEvent(name: string): boolean {\n    return typeof this.abi.events[name] !== 'undefined';\n  }\n}\n","/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\n\nimport { isArray } from '@harmony-js/utils';\nimport { AbiItem } from '../models/AbiItemModel';\nimport { AbiModel } from '../models/AbiModel';\nimport { AbiItemModel } from '../models/types';\nimport { jsonInterfaceMethodToString } from '../abi/utils';\nimport { AbiCoderClass } from '../abi/api';\n\nexport const abiMapper = (abi: any[], abiCoder: AbiCoderClass): AbiModel => {\n  const mappedAbiItems: any = {\n    methods: {},\n    events: {},\n  };\n  let hasConstructor = false;\n\n  abi.forEach((abiItem: AbiItemModel) => {\n    abiItem.constant = isConstant(abiItem);\n    abiItem.payable = isPayable(abiItem);\n\n    if (abiItem.name) {\n      abiItem.funcName = jsonInterfaceMethodToString(abiItem);\n    }\n\n    let abiItemModel;\n\n    if (abiItem.type === 'function') {\n      abiItem.signature = abiCoder.encodeFunctionSignature(abiItem.funcName);\n\n      abiItemModel = new AbiItem(abiItem);\n\n      // Check if an method already exists with this name and if it exists than create an array and push this abiItem\n      // into it. This will be used if there are methods with the same name but with different arguments.\n      if (!mappedAbiItems.methods[abiItem.name]) {\n        mappedAbiItems.methods[abiItem.name] = abiItemModel;\n      } else {\n        if (isArray(mappedAbiItems.methods[abiItem.name])) {\n          mappedAbiItems.methods[abiItem.name].push(abiItemModel);\n        } else {\n          mappedAbiItems.methods[abiItem.name] = [\n            mappedAbiItems.methods[abiItem.name],\n            abiItemModel,\n          ];\n        }\n      }\n\n      mappedAbiItems.methods[abiItem.signature] = abiItemModel;\n      mappedAbiItems.methods[abiItem.funcName] = abiItemModel;\n\n      return;\n    }\n\n    if (abiItem.type === 'event') {\n      abiItem.signature = abiCoder.encodeEventSignature(abiItem.funcName);\n\n      abiItemModel = new AbiItem(abiItem);\n\n      if (\n        !mappedAbiItems.events[abiItem.name] ||\n        mappedAbiItems.events[abiItem.name].name === 'bound '\n      ) {\n        mappedAbiItems.events[abiItem.name] = abiItemModel;\n      }\n\n      mappedAbiItems.events[abiItem.signature] = abiItemModel;\n      mappedAbiItems.events[abiItem.funcName] = abiItemModel;\n    }\n\n    if (abiItem.type === 'constructor') {\n      abiItem.signature = abiItem.type;\n      // tslint:disable-next-line: no-string-literal\n      mappedAbiItems.methods['contractConstructor'] = new AbiItem(abiItem);\n\n      hasConstructor = true;\n    }\n  });\n  if (!hasConstructor) {\n    // tslint:disable-next-line: no-string-literal\n    mappedAbiItems.methods['contractConstructor'] = new AbiItem({\n      inputs: [],\n      payable: false,\n      constant: false,\n      type: 'constructor',\n    });\n  }\n  return new AbiModel(mappedAbiItems);\n};\n\nexport const isConstant = (abiItem: AbiItemModel) => {\n  return (\n    abiItem.stateMutability === 'view' || abiItem.stateMutability === 'pure' || abiItem.constant\n  );\n};\n\nexport const isPayable = (abiItem: AbiItemModel) => {\n  return abiItem.stateMutability === 'payable' || abiItem.payable;\n};\n","/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\n\nimport { isArray } from '@harmony-js/utils';\nimport { AbiItemModel } from '../models/types';\nimport { AbiCoderClass } from '../abi/api';\n\nexport const methodEncoder = (\n  abiCoder: AbiCoderClass,\n  abiItemModel: AbiItemModel,\n  deployData: string,\n) => {\n  let encodedParameters = abiCoder.encodeParameters(\n    abiItemModel.getInputs(),\n    abiItemModel.contractMethodParameters,\n  );\n\n  if (encodedParameters.startsWith('0x')) {\n    encodedParameters = encodedParameters.slice(2);\n  }\n\n  if (abiItemModel.isOfType('constructor')) {\n    if (!deployData) {\n      throw new Error(\n        'The contract has no contract data option set. This is necessary to append the constructor parameters.',\n      );\n    }\n\n    return deployData + encodedParameters;\n  }\n\n  if (abiItemModel.isOfType('function')) {\n    return abiItemModel.signature + encodedParameters;\n  }\n\n  return encodedParameters;\n};\n\nexport const eventFilterEncoder = (\n  abiCoder: AbiCoderClass,\n  abiItemModel: AbiItemModel,\n  filter: any,\n) => {\n  const topics: any[] = [];\n\n  abiItemModel.getIndexedInputs().forEach((input) => {\n    if (filter[input.name]) {\n      let filterItem = filter[input.name];\n\n      if (isArray(filterItem)) {\n        filterItem = filterItem.map((item: any) => {\n          return abiCoder.encodeParameter(input.type, item);\n        });\n\n        topics.push(filterItem);\n\n        return;\n      }\n\n      topics.push(abiCoder.encodeParameter(input.type, filterItem));\n\n      return;\n    }\n\n    topics.push(null);\n  });\n\n  return topics;\n};\n","/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\n\nexport enum ContractStatus {\n  INITIALISED = 'initialised',\n  TESTED = 'tested',\n  ERROR = 'error',\n  SIGNED = 'signed',\n  SENT = 'sent',\n  REJECTED = 'rejected',\n  DEPLOYED = 'deployed',\n  CALLED = 'called',\n}\n","/**\n * @packageDocumentation\n * @module harmony-contract\n */\n\nimport { Wallet } from '@harmony-js/account';\nimport { TransactionFactory, Transaction, TxStatus } from '@harmony-js/transaction';\nimport { RPCMethod, getResultForData, Emitter } from '@harmony-js/network';\nimport { hexToNumber, hexToBN } from '@harmony-js/utils';\nimport { getAddress } from '@harmony-js/crypto';\nimport { AbiItemModel } from '../models/types';\nimport { Contract } from '../contract';\nimport { methodEncoder } from '../utils/encoder';\nimport { ContractStatus } from '../utils/status';\n\n// todo: have to judge if it is contractConstructor\n\nexport class ContractMethod {\n  contract: Contract;\n  params: any;\n  methodKey: string;\n  wallet: Wallet | any;\n  abiItem: AbiItemModel;\n  callResponse?: any;\n  callPayload?: any;\n\n  protected transaction: Transaction;\n  constructor(methodKey: string, params: any, abiItem: AbiItemModel, contract: Contract) {\n    this.methodKey = methodKey;\n    this.contract = contract;\n    this.wallet = contract.wallet;\n    this.params = params;\n    this.abiItem = abiItem;\n    this.transaction = this.createTransaction();\n    this.callPayload = undefined;\n    this.callResponse = undefined;\n  }\n  send(params: any): Emitter {\n    try {\n      let gasLimit: any;\n      const signTxs = () => {\n        this.transaction = this.transaction.map((tx: any) => {\n          return { ...tx, ...params, gasLimit };\n        });\n\n        const updateNonce: boolean = params && params.nonce !== undefined ? false : true;\n        this.signTransaction(updateNonce).then((signed) => {\n          this.sendTransaction(signed).then((sent) => {\n            const [txn, id] = sent;\n            this.transaction = txn;\n            this.contract.transaction = this.transaction;\n            this.confirm(id).then(() => {\n              this.transaction.emitter.resolve(this.contract);\n            });\n          });\n        });\n      };\n\n      // tslint:disable-next-line: prefer-conditional-expression\n      if (params !== undefined) {\n        gasLimit = params.gas || params.gasLimit;\n      }\n      if (gasLimit === undefined) {\n        this.estimateGas().then((gas) => {\n          gasLimit = hexToBN(gas);\n          signTxs();\n        });\n      } else {\n        signTxs();\n      }\n      return this.transaction.emitter;\n    } catch (error) {\n      throw error;\n    }\n  }\n  async call(options: any, blockNumber: any = 'latest') {\n    try {\n      options = { ...this.contract.options, ...options };\n      const shardID =\n        options !== undefined && options.shardID !== undefined\n          ? options.shardID\n          : this.contract.shardID;\n      const nonce = '0x0';\n\n      let gasLimit: any;\n      // tslint:disable-next-line: prefer-conditional-expression\n      if (options !== undefined) {\n        gasLimit = options.gas || options.gasLimit;\n      } else {\n        gasLimit = '21000000';\n      }\n      let from: string;\n      // tslint:disable-next-line: prefer-conditional-expression\n      if (this.wallet.signer) {\n        from = options && options.from ? options.from : this.wallet.signer.address;\n      } else {\n        from =\n          options && options.from ? options.from : '0x0000000000000000000000000000000000000000';\n      }\n\n      this.transaction = this.transaction.map((tx: any) => {\n        return {\n          ...tx,\n          ...options,\n          from: from || tx.from,\n          gasPrice: options ? options.gasPrice : tx.gasPrice,\n          gasLimit: gasLimit || tx.gasLimit,\n          nonce: Number.parseInt(hexToNumber(nonce), 10),\n        };\n      });\n      const keys: string[] = Object.keys(this.transaction.txPayload);\n\n      interface TxPayload {\n        [key: string]: any;\n        from?: string;\n        to?: string;\n        shardID?: string;\n        gas?: string;\n        gasPrice?: string;\n        value?: string;\n        data?: string;\n        nonce?: string;\n      }\n      interface SendPayload {\n        [key: string]: any;\n        from?: string;\n        to?: string;\n        shardID?: string;\n        gas?: string;\n        gasPrice?: string;\n        value?: string;\n        data?: string;\n        nonce?: string;\n      }\n\n      const txPayload: TxPayload = this.transaction.txPayload;\n      const sendPayload: SendPayload = {};\n\n      for (const key of keys) {\n        // tslint:disable-next-line: no-unused-expression\n        if (txPayload[key] !== '0x') {\n          sendPayload[key] = txPayload[key];\n        }\n      }\n\n      const result =\n        // tslint:disable-line\n        await (<Wallet>this.wallet).messenger.send(\n          RPCMethod.Call,\n          [sendPayload, blockNumber],\n          // tslint:disable-line\n          (<Wallet>this.wallet).messenger.chainPrefix,\n          shardID,\n        );\n      this.callPayload = sendPayload;\n      this.callResponse = result;\n      if (result.isError()) {\n        throw result.message;\n      } else if (result.isResult()) {\n        if (result.result === null) {\n          return this.afterCall(undefined);\n        } else {\n          return this.afterCall(result.result);\n        }\n      }\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  async estimateGas(\n    params: {\n      from?: string;\n      to?: string;\n      gas?: string;\n      gasPrice?: string;\n      value?: string;\n      data?: string;\n    } = {},\n  ) {\n    try {\n      if (params.from === undefined && this.contract.options.from !== undefined) {\n        params.from = this.contract.options.from;\n      }\n      if (params.to === undefined && this.transaction.txParams.to !== undefined) {\n        params.to = this.transaction.txParams.to;\n      }\n      if (params.data === undefined) {\n        params.data = this.transaction.txParams.data;\n      }\n      if (params.gasPrice === undefined && this.contract.options.gasPrice !== undefined) {\n        params.gasPrice = this.contract.options.gasPrice;\n      }\n\n      if (this.methodKey === 'contractConstructor') {\n        delete params.to;\n      }\n      const result = getResultForData(\n        // tslint:disable-line\n        await (<Wallet>this.wallet).messenger.send(RPCMethod.EstimateGas, [params]),\n      );\n\n      if (result.responseType === 'error') {\n        throw result.message;\n      } else if (result.responseType === 'raw') {\n        throw new Error('Get estimateGas fail');\n      } else {\n        return result;\n      }\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  encodeABI() {\n    return methodEncoder(this.contract.abiCoder, this.abiItem, this.contract.data);\n  }\n\n  public debug() {\n    return {\n      callResponse: this.callResponse,\n      callPayload: this.callPayload,\n    };\n  }\n\n  protected async signTransaction(updateNonce: boolean) {\n    try {\n      let signed;\n      signed = this.wallet.signer\n        ? await this.wallet.signTransaction(\n            this.transaction,\n            this.wallet.signer,\n            undefined,\n            updateNonce,\n            'rlp',\n            'latest', // 'pending',\n          )\n        : await this.wallet.signTransaction(\n            this.transaction,\n            updateNonce,\n            'rlp',\n            'latest', // 'pending',\n          );\n      if (this.methodKey === 'contractConstructor') {\n        this.contract.address = TransactionFactory.getContractAddress(signed);\n      }\n      this.contract.setStatus(ContractStatus.SIGNED);\n      return signed;\n    } catch (error) {\n      throw error;\n    }\n  }\n  protected async sendTransaction(signed: Transaction) {\n    try {\n      const result = await signed.sendTransaction();\n      this.contract.setStatus(ContractStatus.SENT);\n      return result;\n    } catch (error) {\n      throw error;\n    }\n  }\n  protected async confirm(id: string) {\n    try {\n      const result = await this.transaction.confirm(\n        id,\n        20,\n        1000,\n        this.transaction ? this.transaction.txParams.shardID : this.contract.shardID,\n      );\n\n      if (result.receipt && result.txStatus === TxStatus.CONFIRMED) {\n        if (this.methodKey === 'contractConstructor') {\n          this.contract.setStatus(ContractStatus.DEPLOYED);\n        } else {\n          this.contract.setStatus(ContractStatus.CALLED);\n        }\n      } else {\n        this.contract.setStatus(ContractStatus.REJECTED);\n      }\n    } catch (error) {\n      throw error;\n    }\n  }\n\n  protected createTransaction() {\n    if (this.wallet.messenger) {\n      if (this.methodKey === 'contractConstructor') {\n        // tslint:disable-next-line: no-string-literal\n        this.contract.data = this.params[0]['data'] || '0x';\n\n        this.abiItem.contractMethodParameters =\n          // tslint:disable-next-line: no-string-literal\n          this.params[0]['arguments'] || [];\n      } else {\n        this.abiItem.contractMethodParameters = this.params || [];\n      }\n      const txObject = {\n        ...this.contract.options,\n        ...this.params[0],\n        to:\n          this.methodKey === 'contractConstructor'\n            ? '0x'\n            : getAddress(this.contract.address).checksum,\n        data: this.encodeABI(),\n      };\n\n      // tslint:disable-line\n      const result = new TransactionFactory((<Wallet>this.wallet).messenger).newTx(txObject);\n\n      return result;\n    } else {\n      throw new Error('Messenger is not found');\n    }\n  }\n\n  protected afterCall(response: any) {\n    if (!response || response === '0x') {\n      return null;\n    }\n\n    const outputs = this.abiItem.getOutputs();\n    if (outputs.length > 1) {\n      return this.contract.abiCoder.decodeParameters(outputs, response);\n    }\n    return this.contract.abiCoder.decodeParameter(outputs[0], response);\n    // return outputs;\n  }\n}\n","/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\n\nimport { AbiCoderClass } from '../abi/api';\nimport { AbiModel } from '../models/types';\nimport { Contract } from '../contract';\nimport { ContractMethod } from './method';\n\nexport class MethodFactory {\n  contract: Contract;\n  abiModel: any | AbiModel;\n  abiCoder: AbiCoderClass;\n  private methodKeys: string[];\n\n  // constructor\n  constructor(contract: Contract) {\n    this.contract = contract;\n    this.abiModel = this.contract.abiModel;\n    this.abiCoder = this.contract.abiCoder;\n    this.methodKeys = this.mapMethodKeys();\n  }\n\n  addMethodsToContract() {\n    this.methodKeys.forEach((key: string) => {\n      const newObject: any = {};\n      newObject[key] = (...params: any[]) =>\n        new ContractMethod(key, params, this.abiModel.getMethod(key), this.contract);\n\n      Object.assign(this.contract.methods, newObject);\n    });\n    return this.contract;\n  }\n  /**\n   * @function mapMethodKeys\n   * @return {string[]} {description}\n   */\n  private mapMethodKeys(): string[] {\n    return Object.keys(this.abiModel.abi.methods);\n  }\n}\n","/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\n\nimport { AbiItemModel } from '../models/types';\nimport { AbiCoderClass } from '../abi/api';\n\nexport const decode = (abiCoder: AbiCoderClass, abiItemModel: AbiItemModel, response: any) => {\n  let argumentTopics = response.topics;\n\n  if (!abiItemModel.anonymous) {\n    argumentTopics = response.topics.slice(1);\n  }\n\n  if (response.data === '0x') {\n    response.data = null;\n  }\n\n  response.returnValues = abiCoder.decodeLog(\n    abiItemModel.getInputs(),\n    response.data,\n    argumentTopics,\n  );\n  response.event = abiItemModel.name;\n  response.signature = abiItemModel.signature;\n  response.raw = {\n    data: response.data,\n    topics: response.topics,\n  };\n\n  if (abiItemModel.anonymous || !response.topics[0]) {\n    response.signature = null;\n  }\n\n  delete response.data;\n  delete response.topics;\n\n  return response;\n};\n","/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\n\nimport { hexlify, isHexString, keccak256, toChecksumAddress } from '@harmony-js/crypto';\nimport {\n  numberToHex,\n  isArray,\n  // hexToNumber,\n  isString,\n  isAddress,\n  hexToBN,\n} from '@harmony-js/utils';\nimport { toUtf8Bytes } from '../abi/abiCoder';\n\nexport const inputLogFormatter = (options: any) => {\n  if (options.fromBlock) {\n    options.fromBlock = inputBlockNumberFormatter(options.fromBlock);\n  }\n\n  if (options.toBlock) {\n    options.toBlock = inputBlockNumberFormatter(options.toBlock);\n  }\n\n  // make sure topics, get converted to hex\n  options.topics = options.topics || [];\n  options.topics = options.topics.map((topic: any) => {\n    return isArray(topic) ? topic.map(toTopic) : toTopic(topic);\n  });\n\n  if (options.address) {\n    if (isArray(options.address)) {\n      options.address = options.address.map((addr: string) => {\n        return inputAddressFormatter(addr);\n      });\n    } else {\n      options.address = inputAddressFormatter(options.address);\n    }\n  }\n\n  return options;\n};\n\n/**\n * Formats the output of a log\n *\n * @method outputLogFormatter\n *\n * @param {Object} log object\n *\n * @returns {Object} log\n */\nexport const outputLogFormatter = (log: any) => {\n  // generate a custom log id\n  if (\n    typeof log.blockHash === 'string' &&\n    typeof log.transactionHash === 'string' &&\n    typeof log.logIndex === 'string'\n  ) {\n    const shaId = keccak256(\n      '0x' +\n        log.blockHash.replace('0x', '') +\n        log.transactionHash.replace('0x', '') +\n        log.logIndex.replace('0x', ''),\n    );\n\n    shaId.replace('0x', '').substr(0, 8);\n\n    log.id = `log_${shaId}`;\n  } else if (!log.id) {\n    log.id = null;\n  }\n\n  if (log.blockNumber !== null) {\n    log.blockNumber = hexToBN(log.blockNumber).toNumber();\n  }\n\n  if (log.transactionIndex !== null) {\n    log.transactionIndex = hexToBN(log.transactionIndex).toNumber();\n  }\n\n  if (log.logIndex !== null) {\n    log.logIndex = hexToBN(log.logIndex).toNumber();\n  }\n\n  if (log.address) {\n    log.address = toChecksumAddress(log.address);\n  }\n\n  return log;\n};\n\nexport const inputBlockNumberFormatter = (blockNumber: any) => {\n  if (blockNumber === undefined || blockNumber === null || isPredefinedBlockNumber(blockNumber)) {\n    return blockNumber;\n  }\n\n  if (isHexString(blockNumber)) {\n    if (isString(blockNumber)) {\n      return blockNumber.toLowerCase();\n    }\n\n    return blockNumber;\n  }\n\n  return numberToHex(blockNumber);\n};\n\nexport const isPredefinedBlockNumber = (blockNumber: string) => {\n  return blockNumber === 'latest' || blockNumber === 'pending' || blockNumber === 'earliest';\n};\n\nexport const inputAddressFormatter = (address: string) => {\n  if (isAddress(address)) {\n    return `0x${address.toLowerCase().replace('0x', '')}`;\n  }\n\n  throw new Error(\n    `Provided address \"${address}\" is invalid, the capitalization checksum test failed, or its an indrect IBAN address which can't be converted.`,\n  );\n};\n\nexport const toTopic = (value: any) => {\n  if (value === null || typeof value === 'undefined') {\n    return null;\n  }\n\n  value = String(value);\n\n  if (value.indexOf('0x') === 0) {\n    return value;\n  }\n\n  return hexlify(toUtf8Bytes(value));\n};\n","/**\n * @packageDocumentation\n * @module harmony-contract\n */\n\nimport { LogSub } from '@harmony-js/network';\nimport { AbiItemModel } from '../models/types';\nimport { Contract } from '../contract';\nimport { decode as eventLogDecoder } from '../utils/decoder';\nimport { inputLogFormatter, outputLogFormatter } from '../utils/formatter';\nexport class EventMethod extends LogSub {\n  params: any;\n  methodKey: string;\n  contract: Contract;\n  abiItem: AbiItemModel;\n  constructor(methodKey: string, params: any, abiItem: AbiItemModel, contract: Contract) {\n    super(inputLogFormatter(params), contract.wallet.messenger, contract.shardID);\n    this.methodKey = methodKey;\n    this.contract = contract;\n    this.params = params;\n    this.abiItem = abiItem;\n    // this.subscribe();\n  }\n\n  // call() {}\n  // estimateGas() {}\n  // encodeABI() {}\n\n  onNewSubscriptionItem(subscriptionItem: any) {\n    const formatted = outputLogFormatter(\n      subscriptionItem.method !== undefined ? subscriptionItem.params.result : subscriptionItem,\n    );\n    const log = eventLogDecoder(this.contract.abiCoder, this.abiItem, formatted);\n\n    if (log.removed && this.emitter) {\n      this.emitter.emit('changed', log);\n    }\n\n    return log;\n  }\n}\n","/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\n\nimport { isArray } from '@harmony-js/utils';\nimport { AbiCoderClass } from '../abi/api';\nimport { AbiModel, AbiItemModel } from '../models/types';\nimport { Contract } from '../contract';\nimport { EventMethod } from './event';\nimport { inputBlockNumberFormatter } from '../utils/formatter';\nimport { eventFilterEncoder } from '../utils/encoder';\n\nexport class EventFactory {\n  contract: Contract;\n  abiModel: any | AbiModel;\n  abiCoder: AbiCoderClass;\n  private eventKeys: string[];\n\n  // constructor\n  constructor(contract: Contract) {\n    this.contract = contract;\n    this.abiModel = this.contract.abiModel;\n    this.abiCoder = this.contract.abiCoder;\n    this.eventKeys = this.mapEventKeys();\n  }\n\n  addEventsToContract() {\n    this.eventKeys.forEach((key: string) => {\n      const newObject: any = {};\n      newObject[key] = (params: any) =>\n        new EventMethod(\n          key,\n          // params,\n          this.map(this.abiModel, this.contract, params),\n          this.abiModel.getEvent(key),\n          this.contract,\n        );\n      Object.assign(this.contract.events, newObject);\n    });\n    return this.contract;\n  }\n  /**\n   * @function mapMethodKeys\n   * @return {string[]} {description}\n   */\n  private mapEventKeys(): string[] {\n    return Object.keys(this.abiModel.abi.events);\n  }\n\n  private map(abiItemModel: AbiItemModel, contract: Contract, options: any) {\n    if (!options) {\n      options = {};\n    }\n\n    if (!isArray(options.topics)) {\n      options.topics = [];\n    }\n\n    if (typeof options.fromBlock !== 'undefined') {\n      options.fromBlock = inputBlockNumberFormatter(options.fromBlock);\n    }\n    // else if (contract.defaultBlock !== null) {\n    //   options.fromBlock = contract.defaultBlock;\n    // }\n\n    if (typeof options.toBlock !== 'undefined') {\n      options.toBlock = inputBlockNumberFormatter(options.toBlock);\n    }\n\n    if (typeof options.filter !== 'undefined') {\n      options.topics = options.topics.concat(\n        eventFilterEncoder(this.abiCoder, abiItemModel, options.filter),\n      );\n      delete options.filter;\n    }\n\n    if (!abiItemModel.anonymous) {\n      options.topics.unshift(abiItemModel.signature);\n    }\n\n    if (!options.address) {\n      options.address = contract.address;\n    }\n\n    return options;\n  }\n}\n","/**\n * @packageDocumentation\n * @module harmony-contract\n *\n */\n\nimport { Wallet } from '@harmony-js/account';\nimport { Messenger } from '@harmony-js/network';\nimport { Transaction } from '@harmony-js/transaction';\nimport { AbiCoder } from './abi/index';\nimport { abiMapper } from './utils/mapper';\nimport { ContractOptions } from './utils/options';\nimport { AbiModel } from './models/types';\nimport { AbiCoderClass } from './abi/api';\nimport { MethodFactory } from './methods/methodFactory';\nimport { EventFactory } from './events/eventFactory';\nimport { ContractStatus } from './utils/status';\n\n// class Contract\nexport class Contract {\n  methods: any;\n  events: any;\n  abiModel: any | AbiModel;\n  abiCoder: AbiCoderClass;\n  options: ContractOptions | any;\n  wallet: Wallet | any;\n  transaction?: Transaction;\n  status: ContractStatus;\n  shardID: number;\n\n  constructor(\n    abi: any = [],\n    address: string = '0x',\n    options: ContractOptions = {},\n    wallet: Wallet,\n    status: ContractStatus = ContractStatus.INITIALISED,\n  ) {\n    // super();\n    this.abiCoder = AbiCoder();\n    this.abiModel = abiMapper(abi, this.abiCoder);\n    this.options = options;\n    this.address = this.options.address || address;\n    this.shardID = this.options.shardID || wallet.messenger.currentShard;\n    this.wallet = wallet;\n    this.methods = {};\n    this.events = {};\n    this.runMethodFactory();\n    this.runEventFactory();\n    this.status = status;\n    // tslint:disable-next-line: no-unused-expression\n  }\n  isInitialised() {\n    return this.status === ContractStatus.INITIALISED;\n  }\n  isSigned() {\n    return this.status === ContractStatus.SIGNED;\n  }\n  isSent() {\n    return this.status === ContractStatus.SENT;\n  }\n  isDeployed() {\n    return this.status === ContractStatus.DEPLOYED;\n  }\n  isRejected() {\n    return this.status === ContractStatus.REJECTED;\n  }\n  isCalled() {\n    return this.status === ContractStatus.CALLED;\n  }\n  setStatus(status: ContractStatus) {\n    this.status = status;\n  }\n\n  get jsonInterface(): any[] {\n    return this.abiModel;\n  }\n\n  set jsonInterface(value: any[]) {\n    this.abiModel = abiMapper(value, this.abiCoder);\n    this.runMethodFactory();\n    this.runEventFactory();\n  }\n\n  get address() {\n    return this.options.address || this.address;\n  }\n\n  set address(value: string) {\n    this.options.address = value;\n  }\n\n  get data() {\n    return this.options.data;\n  }\n\n  set data(value) {\n    this.options.data = value;\n  }\n\n  // deploy\n  deploy(options: any) {\n    return this.methods.contractConstructor(options);\n  }\n\n  runMethodFactory(): Contract {\n    return new MethodFactory(this).addMethodsToContract();\n  }\n  runEventFactory(): Contract {\n    return new EventFactory(this).addEventsToContract();\n  }\n  connect(wallet: Wallet): void {\n    this.wallet = wallet;\n  }\n  setMessegner(messenger: Messenger) {\n    if (this.wallet instanceof Wallet) {\n      this.wallet.setMessenger(messenger);\n    } else {\n      this.wallet.messenger = messenger;\n    }\n  }\n}\n","/**\n * @packageDocumentation\n * @module harmony-contract\n */\n\nimport { Wallet } from '@harmony-js/account';\nimport { Contract } from './contract';\nimport { ContractOptions } from './utils/options';\n\nexport class ContractFactory {\n  wallet: Wallet | any;\n\n  constructor(wallet: Wallet | any) {\n    this.wallet = wallet;\n  }\n  createContract(abi: any[], address?: string, options?: ContractOptions) {\n    return new Contract(abi, address, options, this.wallet);\n  }\n}\n","/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\n\nexport * from './abi/index';\nexport { toUtf8Bytes, toUtf8String, formatBytes32String, parseBytes32String } from './abi/abiCoder';\n\nexport { Contract } from './contract';\nexport { ContractFactory } from './contractFactory';\n"],"names":["throwError","AbiCoder","EtherCoder","eventLogDecoder"],"mappings":"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"}